
<!doctype html>
<html lang="pt" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Como instalar as dependências e ajustar nosso pyproject.toml">
      
      
      
        <link rel="canonical" href="https://fastapidozero.dunossauro.com/estavel/01/">
      
      
        <link rel="prev" href="..">
      
      
        <link rel="next" href="../02/">
      
      
      <link rel="icon" href="../assets/logo.svg">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.14">
    
    
      
        <title>Configurando o ambiente de desenvolvimento - FastAPI do Zero</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.342714a4.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../assets/_markdown_exec_pyodide.css">
    
      <link rel="stylesheet" href="../assets/_markdown_exec_ansi.css">
    
      <link rel="stylesheet" href="../stylesheets/extra.css">
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
      
        <meta  property="og:type"  content="website" >
      
        <meta  property="og:title"  content="Configurando o ambiente de desenvolvimento - FastAPI do Zero" >
      
        <meta  property="og:description"  content="Como instalar as dependências e ajustar nosso pyproject.toml" >
      
        <meta  property="og:image"  content="https://fastapidozero.dunossauro.com/estavel/assets/images/social/01.png" >
      
        <meta  property="og:image:type"  content="image/png" >
      
        <meta  property="og:image:width"  content="1200" >
      
        <meta  property="og:image:height"  content="630" >
      
        <meta  property="og:url"  content="https://fastapidozero.dunossauro.com/estavel/01/" >
      
        <meta  name="twitter:card"  content="summary_large_image" >
      
        <meta  name="twitter:title"  content="Configurando o ambiente de desenvolvimento - FastAPI do Zero" >
      
        <meta  name="twitter:description"  content="Como instalar as dependências e ajustar nosso pyproject.toml" >
      
        <meta  name="twitter:image"  content="https://fastapidozero.dunossauro.com/estavel/assets/images/social/01.png" >
      
    
    

<script>
    const preferencesKey = "fonts-preferences";
    const preferencesId = "md-fonts-style";
    const loadSetPreferences = () => {
	let prefStyles = document.querySelector(`#${preferencesId}`);

	if (!prefStyles) {
	    prefStyles = document.createElement("style");
	    prefStyles.id = preferencesId;
	    document.head.insertAdjacentElement("beforeend", prefStyles);
	}

	prefStyles.innerHTML = "";

	const loadedPreferences = __md_get(preferencesKey);

	if (!loadedPreferences) {
	    __md_set(preferencesKey, {
		"__global": {
		    "cssRaw": ""
		}
	    });
	    return;
	}

	prefStyles.innerHTML = loadedPreferences["__global"]["cssRaw"];
    };
    loadSetPreferences();
</script>

   <link href="../assets/stylesheets/glightbox.min.css" rel="stylesheet"/><style>
    html.glightbox-open { overflow: initial; height: 100%; }
    .gslide-title { margin-top: 0px; user-select: text; }
    .gslide-desc { color: #666; user-select: text; }
    .gslide-image img { background: white; }
    .gscrollbar-fixer { padding-right: 15px; }
    .gdesc-inner { font-size: 0.75rem; }
    body[data-md-color-scheme="slate"] .gdesc-inner { background: var(--md-default-bg-color);}
    body[data-md-color-scheme="slate"] .gslide-title { color: var(--md-default-fg-color);}
    body[data-md-color-scheme="slate"] .gslide-desc { color: var(--md-default-fg-color);}</style> <script src="../assets/javascripts/glightbox.min.js"></script></head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="slate" data-md-color-primary="deep-purple" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#configurando-o-ambiente-de-desenvolvimento" class="md-skip">
          Ir para o conteúdo
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <div data-md-color-scheme="default" data-md-component="outdated" hidden>
        
      </div>
    
    
      



<header class="md-header md-header--shadow" data-md-component="header">
    <nav class="md-header__inner md-grid" aria-label="Cabeçalho">
	<a href=".." title="FastAPI do Zero" class="md-header__button md-logo" aria-label="FastAPI do Zero" data-md-component="logo">
	    
  <img src="../assets/logo.svg" alt="logo">

	</a>
	<label class="md-header__button md-icon" for="__drawer">
	    
	    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
	</label>
	<div class="md-header__title" data-md-component="header-title">
	    <div class="md-header__ellipsis">
		<div class="md-header__topic">
		    <span class="md-ellipsis">
			FastAPI do Zero
		    </span>
		</div>
		<div class="md-header__topic" data-md-component="header-topic">
		    <span class="md-ellipsis">
			
			Configurando o ambiente de desenvolvimento
			
		    </span>
		</div>
	    </div>
	</div>
	
	
	<form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="deep-purple" data-md-color-accent="indigo"  aria-label="Modo claro"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Modo claro" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0-7 2.39 3.42C13.65 5.15 12.84 5 12 5s-1.65.15-2.39.42zM3.34 7l4.16-.35A7.2 7.2 0 0 0 5.94 8.5c-.44.74-.69 1.5-.83 2.29zm.02 10 1.76-3.77a7.131 7.131 0 0 0 2.38 4.14zM20.65 7l-1.77 3.79a7.02 7.02 0 0 0-2.38-4.15zm-.01 10-4.14.36c.59-.51 1.12-1.14 1.54-1.86.42-.73.69-1.5.83-2.29zM12 22l-2.41-3.44c.74.27 1.55.44 2.41.44.82 0 1.63-.17 2.37-.44z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="deep-purple" data-md-color-accent="indigo"  aria-label="Modo noturno"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Modo noturno" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3zm3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95zm-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31"/></svg>
      </label>
    
  
</form>
	
	
	
	<script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
	
	<!-- fonts -->
	<div class="md-header__option">
    <div class="md-select">
	
	<button class="md-header__button md-icon" aria-label="Selecione a fonte">
	    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 8h3v12h1v1h-4v-1h1v-3h-4l-1.5 3H14v1h-4v-1h1zm1 1-3.5 7H18zM5 3h5c1.11 0 2 .89 2 2v11H9v-5H6v5H3V5c0-1.11.89-2 2-2m1 2v4h3V5z"/></svg>
	</button>
	<div class="md-select__inner">
	    <ul class="md-select__list">
		
		<li class="md-select__item">
		    <a id="md-fonts" data-text="Default" data-code="" data-src="" class="md-select__link">
			Default
		    </a>
		</li>
		
		<li class="md-select__item">
		    <a id="md-fonts" data-text="Roboto" data-code="Roboto Mono" data-src="" class="md-select__link">
			Roboto
		    </a>
		</li>
		
		<li class="md-select__item">
		    <a id="md-fonts" data-text="OpenDyslexic" data-code="OpenDyslexicMono" data-src="https://fonts.cdnfonts.com/css/opendyslexic" class="md-select__link">
			OpenDyslexic
		    </a>
		</li>
		
	    </ul>
	</div>
    </div>
</div>
	<!-- fonts -->
	
	
	<label class="md-header__button md-icon" for="__search">
	    
	    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
	</label>
	<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Buscar" placeholder="Buscar" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Pesquisar">
        
          <a href="javascript:void(0)" class="md-search__icon md-icon" title="Compartilhar" aria-label="Compartilhar" data-clipboard data-clipboard-text="" data-md-component="search-share" tabindex="-1">
            
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91s2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08"/></svg>
          </a>
        
        <button type="reset" class="md-search__icon md-icon" title="Limpar" aria-label="Limpar" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Inicializando a pesquisa
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
	
	
	<div class="md-header__source">
	    <a href="https://github.com/dunossauro/fastapi-do-zero" title="Ir ao repositório" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    dunossauro/fastapi-do-zero
  </div>
</a>
	</div>
	
    </nav>
    
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navegação" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="FastAPI do Zero" class="md-nav__button md-logo" aria-label="FastAPI do Zero" data-md-component="logo">
      
  <img src="../assets/logo.svg" alt="logo">

    </a>
    FastAPI do Zero
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/dunossauro/fastapi-do-zero" title="Ir ao repositório" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    dunossauro/fastapi-do-zero
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    FastAPI do Zero!
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    Configurando o ambiente de desenvolvimento
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    Configurando o ambiente de desenvolvimento
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Índice">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Índice
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#ambiente-de-desenvolvimento" class="md-nav__link">
    <span class="md-ellipsis">
      Ambiente de Desenvolvimento
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pipx" class="md-nav__link">
    <span class="md-ellipsis">
      pipx
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#poetry" class="md-nav__link">
    <span class="md-ellipsis">
      Poetry
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Poetry">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#instalacao-do-poetry" class="md-nav__link">
    <span class="md-ellipsis">
      Instalação do poetry
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gerenciamento-de-versoes-do-python" class="md-nav__link">
    <span class="md-ellipsis">
      Gerenciamento de versões do Python
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#criando-um-projeto" class="md-nav__link">
    <span class="md-ellipsis">
      Criando um projeto
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Criando um projeto">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#instalando-o-fastapi" class="md-nav__link">
    <span class="md-ellipsis">
      Instalando o FastAPI
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#primeira-execucao-de-um-hello-world" class="md-nav__link">
    <span class="md-ellipsis">
      Primeira Execução de um "Hello, World!"
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#uvicorn" class="md-nav__link">
    <span class="md-ellipsis">
      Uvicorn
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#instalando-as-ferramentas-de-desenvolvimento" class="md-nav__link">
    <span class="md-ellipsis">
      Instalando as ferramentas de desenvolvimento
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#configurando-as-ferramentas-de-desenvolvimento" class="md-nav__link">
    <span class="md-ellipsis">
      Configurando as ferramentas de desenvolvimento
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Configurando as ferramentas de desenvolvimento">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ruff" class="md-nav__link">
    <span class="md-ellipsis">
      Ruff
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pytest" class="md-nav__link">
    <span class="md-ellipsis">
      pytest
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#taskipy" class="md-nav__link">
    <span class="md-ellipsis">
      Taskipy
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Taskipy">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#comandos-com-prefixo-pre-e-pos" class="md-nav__link">
    <span class="md-ellipsis">
      Comandos com prefixo pre e pos
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#os-efeitos-dessas-configuracoes-de-desenvolvimento" class="md-nav__link">
    <span class="md-ellipsis">
      Os efeitos dessas configurações de desenvolvimento
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#introducao-ao-pytest-testando-o-hello-world" class="md-nav__link">
    <span class="md-ellipsis">
      Introdução ao Pytest: Testando o "Hello, World!"
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Introdução ao Pytest: Testando o &#34;Hello, World!&#34;">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#escrevendo-o-teste" class="md-nav__link">
    <span class="md-ellipsis">
      Escrevendo o teste
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#estrutura-de-um-teste" class="md-nav__link">
    <span class="md-ellipsis">
      Estrutura de um teste
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Estrutura de um teste">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#fase-1-organizar-arrange" class="md-nav__link">
    <span class="md-ellipsis">
      Fase 1 - Organizar (Arrange)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#fase-2-agir-act" class="md-nav__link">
    <span class="md-ellipsis">
      Fase 2 - Agir (Act)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#fase-3-afirmar-assert" class="md-nav__link">
    <span class="md-ellipsis">
      Fase 3 - Afirmar (Assert)
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#criando-nosso-repositorio-no-git" class="md-nav__link">
    <span class="md-ellipsis">
      Criando nosso repositório no git
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#suplementar-para-proxima-aula" class="md-nav__link">
    <span class="md-ellipsis">
      Suplementar / Para próxima aula
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#exercicio" class="md-nav__link">
    <span class="md-ellipsis">
      Exercício
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#conclusao" class="md-nav__link">
    <span class="md-ellipsis">
      Conclusão
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../02/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Introdução ao desenvolvimento WEB
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../03/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Estruturando o projeto e criando rotas CRUD
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../04/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Configurando o banco de dados e gerenciando migrações com Alembic
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../05/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Integrando banco de dados à API
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../06/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Autenticação e Autorização com JWT
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../07/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Refatorando a estrutura do projeto
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../08/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Tornando o projeto assíncrono
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../09/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Tornando o sistema de autenticação robusto
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../10/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Criando rotas CRUD para gerenciamento de tarefas
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../11/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Dockerizando a nossa aplicação e introduzindo o PostgreSQL
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../12/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Automatizando os testes com Integração Contínua
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../13/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Fazendo deploy no Fly.io
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../14/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Despedida e próximos passos
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../15/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Projeto final
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../alteracoes/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Alterações
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_18" >
        
          
          <label class="md-nav__link" for="__nav_18" id="__nav_18_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Apendices
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_18_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_18">
            <span class="md-nav__icon md-icon"></span>
            Apendices
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../apendices/a_instalacoes/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    A - Instalando as ferramentas externas
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../apendices/b_proximos_passos/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    B - Próximos passos
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../apendices/c_versoes_usadas/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    C - Versões das bibliotecas
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_19" >
        
          
          <label class="md-nav__link" for="__nav_19" id="__nav_19_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Aulas
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_19_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_19">
            <span class="md-nav__icon md-icon"></span>
            Aulas
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../aulas/2024/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Aulas síncronas 2024
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../aulas/2025/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Aulas síncronas 2025
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_20" >
        
          
          <label class="md-nav__link" for="__nav_20" id="__nav_20_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Exercicios resolvidos
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_20_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_20">
            <span class="md-nav__icon md-icon"></span>
            Exercicios resolvidos
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../exercicios_resolvidos/aula_01/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Exercícios da aula 01
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../exercicios_resolvidos/aula_02/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Exercícios da aula 02
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../exercicios_resolvidos/aula_03/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Exercícios da aula 03
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../exercicios_resolvidos/aula_04/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Exercícios da aula 04
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../exercicios_resolvidos/aula_05/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Exercícios da aula 05
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../exercicios_resolvidos/aula_06/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Exercícios da aula 06
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../exercicios_resolvidos/aula_08/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Exercícios da aula 08
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../exercicios_resolvidos/aula_09/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Exercícios da aula 09
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../exercicios_resolvidos/aula_10/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Exercícios da aula 10
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_21" >
        
          
          <label class="md-nav__link" for="__nav_21" id="__nav_21_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Projetos
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_21_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_21">
            <span class="md-nav__icon md-icon"></span>
            Projetos
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../projetos/projetos_finais/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Projetos finais
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../projetos/repositorios/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Repositórios do curso
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_22" >
        
          
          <label class="md-nav__link" for="__nav_22" id="__nav_22_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Quizes
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_22_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_22">
            <span class="md-nav__icon md-icon"></span>
            Quizes
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../quizes/aula_01/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Aula 01
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../quizes/aula_02/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    02 - Introdução ao desenvolvimento WEB
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../quizes/aula_03/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Aula 03
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../quizes/aula_04/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Aula 04
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../quizes/aula_05/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Aula 05
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../quizes/aula_06/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Aula 06
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../quizes/aula_07/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Aula 07
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../quizes/aula_08/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Aula 08
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../quizes/aula_09/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Aula 09
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../quizes/aula_10/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Aula 10
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../quizes/aula_11/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    11 - Dockerizando a nossa aplicação e introduzindo o PostgreSQL
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../quizes/aula_12/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    12 - Automatizando os testes com Integração Contínua (CI)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../quizes/aula_13/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    13 - Fazendo deploy no Fly.io
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Índice">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Índice
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#ambiente-de-desenvolvimento" class="md-nav__link">
    <span class="md-ellipsis">
      Ambiente de Desenvolvimento
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pipx" class="md-nav__link">
    <span class="md-ellipsis">
      pipx
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#poetry" class="md-nav__link">
    <span class="md-ellipsis">
      Poetry
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Poetry">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#instalacao-do-poetry" class="md-nav__link">
    <span class="md-ellipsis">
      Instalação do poetry
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gerenciamento-de-versoes-do-python" class="md-nav__link">
    <span class="md-ellipsis">
      Gerenciamento de versões do Python
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#criando-um-projeto" class="md-nav__link">
    <span class="md-ellipsis">
      Criando um projeto
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Criando um projeto">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#instalando-o-fastapi" class="md-nav__link">
    <span class="md-ellipsis">
      Instalando o FastAPI
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#primeira-execucao-de-um-hello-world" class="md-nav__link">
    <span class="md-ellipsis">
      Primeira Execução de um "Hello, World!"
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#uvicorn" class="md-nav__link">
    <span class="md-ellipsis">
      Uvicorn
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#instalando-as-ferramentas-de-desenvolvimento" class="md-nav__link">
    <span class="md-ellipsis">
      Instalando as ferramentas de desenvolvimento
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#configurando-as-ferramentas-de-desenvolvimento" class="md-nav__link">
    <span class="md-ellipsis">
      Configurando as ferramentas de desenvolvimento
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Configurando as ferramentas de desenvolvimento">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ruff" class="md-nav__link">
    <span class="md-ellipsis">
      Ruff
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pytest" class="md-nav__link">
    <span class="md-ellipsis">
      pytest
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#taskipy" class="md-nav__link">
    <span class="md-ellipsis">
      Taskipy
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Taskipy">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#comandos-com-prefixo-pre-e-pos" class="md-nav__link">
    <span class="md-ellipsis">
      Comandos com prefixo pre e pos
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#os-efeitos-dessas-configuracoes-de-desenvolvimento" class="md-nav__link">
    <span class="md-ellipsis">
      Os efeitos dessas configurações de desenvolvimento
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#introducao-ao-pytest-testando-o-hello-world" class="md-nav__link">
    <span class="md-ellipsis">
      Introdução ao Pytest: Testando o "Hello, World!"
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Introdução ao Pytest: Testando o &#34;Hello, World!&#34;">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#escrevendo-o-teste" class="md-nav__link">
    <span class="md-ellipsis">
      Escrevendo o teste
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#estrutura-de-um-teste" class="md-nav__link">
    <span class="md-ellipsis">
      Estrutura de um teste
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Estrutura de um teste">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#fase-1-organizar-arrange" class="md-nav__link">
    <span class="md-ellipsis">
      Fase 1 - Organizar (Arrange)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#fase-2-agir-act" class="md-nav__link">
    <span class="md-ellipsis">
      Fase 2 - Agir (Act)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#fase-3-afirmar-assert" class="md-nav__link">
    <span class="md-ellipsis">
      Fase 3 - Afirmar (Assert)
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#criando-nosso-repositorio-no-git" class="md-nav__link">
    <span class="md-ellipsis">
      Criando nosso repositório no git
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#suplementar-para-proxima-aula" class="md-nav__link">
    <span class="md-ellipsis">
      Suplementar / Para próxima aula
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#exercicio" class="md-nav__link">
    <span class="md-ellipsis">
      Exercício
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#conclusao" class="md-nav__link">
    <span class="md-ellipsis">
      Conclusão
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  
  


<div><h1 id="configurando-o-ambiente-de-desenvolvimento">Configurando o ambiente de desenvolvimento</h1>
<hr>
<p>Objetivos dessa aula:</p>
<ul>
<li>Introdução ao ambiente de desenvolvimento (terminal, ferramentas, etc.)</li>
<li>Instalação do FastAPI e suas dependências</li>
<li>Configuração das ferramentas de desenvolvimento</li>
<li>Execução do primeiro "Hello, World!" com FastAPI com testes!</li>
</ul>
<details class="tip">
<summary>Caso prefira ver a aula em vídeo</summary>
<p>Essa aula ainda não está disponível em formato de vídeo, somente em texto ou live!
<a class="glightbox" href="https://www.youtube.com/embed/-Pi5AmOfL2s" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><div class="video-container"><iframe src="https://www.youtube.com/embed/-Pi5AmOfL2s" style="position:relative;width:100%;height:22.172vw" frameborder="0" allowfullscreen alt="type:video"></iframe></div></a></p>
</details>
<p><a class="md-button" href="https://youtu.be/-Pi5AmOfL2s?list=PLOQgLBuj2-3IuFbt-wJw2p2NiV9WTRzIP">Aula <span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 576 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M549.655 124.083c-6.281-23.65-24.787-42.276-48.284-48.597C458.781 64 288 64 288 64S117.22 64 74.629 75.486c-23.497 6.322-42.003 24.947-48.284 48.597-11.412 42.867-11.412 132.305-11.412 132.305s0 89.438 11.412 132.305c6.281 23.65 24.787 41.5 48.284 47.821C117.22 448 288 448 288 448s170.78 0 213.371-11.486c23.497-6.321 42.003-24.171 48.284-47.821 11.412-42.867 11.412-132.305 11.412-132.305s0-89.438-11.412-132.305m-317.51 213.508V175.185l142.739 81.205z"></path></svg></span></a>
<a class="md-button" href="https://fastapidozero.dunossauro.com/estavel/slides/aula_01.html">Slides <span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 384 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M64 0C28.7 0 0 28.7 0 64v384c0 35.3 28.7 64 64 64h256c35.3 0 64-28.7 64-64V160H256c-17.7 0-32-14.3-32-32V0zm192 0v128h128zM136 240h68c42 0 76 34 76 76s-34 76-76 76h-44v32c0 13.3-10.7 24-24 24s-24-10.7-24-24V264c0-13.3 10.7-24 24-24m68 104c15.5 0 28-12.5 28-28s-12.5-28-28-28h-44v56z"></path></svg></span></a>
<a class="md-button" href="https://github.com/dunossauro/fastapi-do-zero/tree/main/codigo_das_aulas/01">Código <span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 640 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M392.8 1.2c-17-4.9-34.7 5-39.6 22l-128 448c-4.9 17 5 34.7 22 39.6s34.7-5 39.6-22l128-448c4.9-17-5-34.7-22-39.6m80.6 120.1c-12.5 12.5-12.5 32.8 0 45.3l89.3 89.4-89.4 89.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0l112-112c12.5-12.5 12.5-32.8 0-45.3l-112-112c-12.5-12.5-32.8-12.5-45.3 0zm-306.7 0c-12.5-12.5-32.8-12.5-45.3 0l-112 112c-12.5 12.5-12.5 32.8 0 45.3l112 112c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L77.3 256l89.4-89.4c12.5-12.5 12.5-32.8 0-45.3"></path></svg></span></a>
<a class="md-button" href="../quizes/aula_01/">Quiz <span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24"><path d="M4 2h16a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2h-6.1l-3.7 3.71c-.2.19-.45.29-.7.29H9a1 1 0 0 1-1-1v-3H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2m8.19 3.5c-.89 0-1.6.18-2.14.54-.55.36-.83.96-.78 1.65h1.97c0-.28.1-.49.26-.63.2-.14.42-.21.69-.21.31 0 .58.08.76.26.18.17.27.39.27.69 0 .28-.08.53-.22.74-.17.22-.38.4-.64.54-.52.32-.86.6-1.07.84-.19.24-.29.58-.29 1.08h2c0-.28.05-.5.14-.68.09-.17.26-.32.52-.47.46-.21.84-.49 1.13-.85.29-.37.44-.76.44-1.2q0-1.05-.81-1.68c-.54-.41-1.29-.62-2.23-.62M11 12v2h2v-2z"></path></svg></span></a>
<a class="md-button" href="../exercicios_resolvidos/aula_01/">Exercícios <span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24"><path d="M3 7V5h2V4a2 2 0 0 1 2-2h6v7l2.5-1.5L18 9V2h1c1.05 0 2 .95 2 2v16c0 1.05-.95 2-2 2H7c-1.05 0-2-.95-2-2v-1H3v-2h2v-4H3v-2h2V7zm4 4H5v2h2zm0-4V5H5v2zm0 12v-2H5v2z"></path></svg></span></a></p>
<hr>
<p>Nesta aula, iniciaremos nossa jornada na construção de uma API com FastAPI. Partiremos do básico, configurando nosso ambiente de desenvolvimento. Discutiremos desde a escolha e instalação da versão correta do Python até a instalação e configuração do Poetry, um gerenciador de pacotes e dependências para Python. Além disso, instalaremos e configuraremos uma série de ferramentas de desenvolvimento úteis, como Ruff, pytest e Taskipy.</p>
<p>Após configurado o nosso ambiente, criaremos nosso primeiro programa "Hello, World!" com FastAPI. Isso nos permitirá confirmar que tudo está funcionando corretamente. E, finalmente, exploraremos uma parte crucial do Desenvolvimento Orientado por Testes (TDD), escrevendo nosso primeiro teste com Pytest.</p>
<h2 id="ambiente-de-desenvolvimento">Ambiente de Desenvolvimento</h2>
<p>Para iniciar esse curso, você precisa de algumas ferramentas instaladas:</p>
<ol>
<li>Um editor de texto a sua escolha (Usarei o <a href="https://www.gnu.org/software/emacs/" target="_blank">GNU/Emacs</a>)</li>
<li>Um terminal a sua escolha (Usarei o <a href="https://gnome-terminator.org/" target="_blank">Terminator</a>)</li>
<li>Python, em uma versão <a href="https://devguide.python.org/versions/" target="_blank">oficialmente suportada</a>, atualmente 3.9+</li>
<li><a href="https://git-scm.com/" target="_blank">Git</a>: Para gerenciar versões do nosso projeto. (Caso precise de um tutorial legal sobre git, o <a href="https://www.youtube.com/playlist?list=PLvlkVRRKOYFQ3cfYPjLeQ0KvrQ8bG5H11" target="_blank">TeoMeWhy</a> fez uma playlist muito legal, totalmente de graça)</li>
<li><a href="https://www.docker.com/" target="_blank">Docker</a>: Para criar um container da nossa aplicação (caso não tenha nenhuma experiência com docker a <a href="https://www.youtube.com/playlist?list=PLf-O3X2-mxDn1VpyU2q3fuI6YYeIWp5rR" target="_blank">Linuxtips</a> tem uma playlist completa e grátis sobre docker no canal deles no YouTube)<sup id="fnref:1"><a class="footnote-ref" href="#fn:1">1</a></sup></li>
<li><strong>OPCIONAL (extremamente recomendado)</strong>: O <a href="https://cli.github.com/" target="_blank">gh</a> para criar o repositório e fazer alterações sem precisar acessar a página do Github</li>
</ol>
<blockquote>
<p>🚨 Caso você precise de ajuda com a instalação dessas ferramentas, temos <a href="../apendices/a_instalacoes/" target="_blank">um apêndice especial para te ajudar com isso!</a>. Basta clicar em achar a ferramenta que deseja instalar! 🚨</p>
</blockquote>
<details class="danger" open="open">
<summary>Sobre as versões das bibliotecas instaladas</summary>
<p>A última atualização dos pacotes deste material foi feita em: <strong>11/06/2025 às 10:27</strong>.</p>
<p>Caso você esteja lendo este material em um futuro distante ou enfrente erros de instalação, o <a href="../apendices/c_versoes_usadas/">apêndice C</a> contém todas as versões usadas no ambiente de forma detalhada.</p>
</details>
<h2 id="pipx">pipx</h2>
<p>O <a href="https://pipx.pypa.io/latest/" target="_blank">pipx</a> é uma ferramenta usada para instalar e executar ferramentas Python globalmente no sistema de forma segura. Diferente do <strong>pip</strong>, que instala ferramentas sem um ambiente virtual (por padrão) e pode "sujar" nosso ambiente, o <code>pipx</code> cria um ambiente virtual e isola cada ferramenta dentro dele, facilitando a instalação de pacotes globais.</p>
<p>Em nosso projeto, usaremos o <strong>pipx</strong> para instalar ferramentas globais e executar algumas que serão usadas apenas uma vez.</p>
<p>Para instalar o pipx:</p>
<div class="language-shell highlight"><span class="filename">$ Execução no terminal!</span><pre><span></span><code><span id="__span-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a>pip<span class="w"> </span>install<span class="w"> </span>--user<span class="w"> </span>pipx
</span></code></pre></div>
<p>Dessa forma, a única dependência global que teremos no nosso sistema será o próprio <code>pipx</code>.</p>
<details class="warning" open="open">
<summary>Existem outras formas de instalar o pipx</summary>
<p>Caso você tenha um gerenciador de pacotes no seu sistema operacional, é <strong>extremamente</strong> recomendado que você instale o <code>pipx</code> por ele.</p>
<p>As instruções de instalação para cada sistema estão disponíveis na <a href="https://pipx.pypa.io/latest/installation/#installing-pipx" target="_blank">documentação do projeto</a>.</p>
</details>
<p>Para o nosso sistema reconhecer o caminho das ferramentas instaladas via <code>pipx</code> podemos executar o comando:</p>
<div class="language-shell highlight"><span class="filename">$ Execução no terminal!</span><pre><span></span><code><span id="__span-1-1"><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a>pipx<span class="w"> </span>ensurepath<span class="w"> </span><span class="c1">#(1)!</span>
</span></code></pre></div>
<ol>
<li>Adiciona o diretório dos ambientes virtuais do <code>pipx</code> ao <code>PATH</code> do sistema.</li>
</ol>
<p>Esse comando adiciona ao <code>PATH</code> do sistema todos os binários instalados pelo <code>pipx</code> 🚨. Portanto, lembre-se de reiniciar o shell após executá-lo.</p>
<h2 id="poetry">Poetry</h2>
<p>O <a href="https://python-poetry.org/" target="_blank">Poetry</a> é um gerenciador de projetos para Python. Ele pode nos ajudar em diversas etapas do ciclo de desenvolvimento, como a instalação de versões específicas do Python, a criação e manutenção de projetos (incluindo a definição de estruturas de pastas, o gerenciamento de ambientes virtuais e a instalação de bibliotecas), além de permitir a publicação de pacotes e muito mais.</p>
<p>No nosso projeto, ele será o componente central para agrupar e executar todas as tarefas relacionadas ao projeto.</p>
<details class="info">
<summary>Caso esse seja seu primeiro contato com o Poetry</summary>
<p>Temos uma live de python explicando somente ele:</p>
<p><a class="glightbox" href="https://www.youtube.com/embed/ZOSWdktsKf0" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><div class="video-container"><iframe src="https://www.youtube.com/embed/ZOSWdktsKf0" style="position:relative;width:100%;height:22.172vw" frameborder="0" allowfullscreen alt="type:video"></iframe></div></a></p>
<p><a class="md-button" href="https://youtu.be/ZOSWdktsKf0"><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 576 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M549.655 124.083c-6.281-23.65-24.787-42.276-48.284-48.597C458.781 64 288 64 288 64S117.22 64 74.629 75.486c-23.497 6.322-42.003 24.947-48.284 48.597-11.412 42.867-11.412 132.305-11.412 132.305s0 89.438 11.412 132.305c6.281 23.65 24.787 41.5 48.284 47.821C117.22 448 288 448 288 448s170.78 0 213.371-11.486c23.497-6.321 42.003-24.171 48.284-47.821 11.412-42.867 11.412-132.305 11.412-132.305s0-89.438-11.412-132.305m-317.51 213.508V175.185l142.739 81.205z"></path></svg></span> Link direto</a></p>
</details>
<h3 id="instalacao-do-poetry">Instalação do poetry</h3>
<p>A instalação do Poetry pode ser feita de diversas maneiras, mas a forma que <strong>recomendo</strong>, para uma instalação global e isolada em um ambiente virtual, é via <code>pipx</code>:</p>
<div class="language-shell highlight"><span class="filename">$ Execução no terminal!</span><pre><span></span><code><span id="__span-2-1"><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a>pipx<span class="w"> </span>install<span class="w"> </span>poetry<span class="w"> </span><span class="c1">#(1)!</span>
</span></code></pre></div>
<ol>
<li>Cria um ambiente virtual isolado para poetry e o deixa disponível no sistema.</li>
</ol>
<details class="danger" open="open">
<summary>Comentários em blocos</summary>
<p>Blocos de código costumam ter comentários com informações adicionais, como este:
<a class="glightbox" href="../assets/01/blocos_de_explicacao.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="" class="center shadow" src="../assets/01/blocos_de_explicacao.png"></a></p>
<hr>
<p>Ao clicar em <span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24"><path d="M17 13h-4v4h-2v-4H7v-2h4V7h2v4h4m-5-9A10 10 0 0 0 2 12a10 10 0 0 0 10 10 10 10 0 0 0 10-10A10 10 0 0 0 12 2"></path></svg></span> um bloco de comentário se abrirá, exibindo mais informações:</p>
<p><a class="glightbox" href="../assets/01/tips_blocos_de_codigo.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="" class="center shadow" src="../assets/01/tips_blocos_de_codigo.png"></a></p>
</details>
<p>E, para facilitar nosso fluxo de trabalho com ambientes virtuais, vamos instalar uma extensão do Poetry para habilitar o shell:</p>
<div class="tabbed-set tabbed-alternate" data-tabs="1:2"><input checked id="__tabbed_1_1" name="__tabbed_1" type="radio"><input id="__tabbed_1_2" name="__tabbed_1" type="radio"><div class="tabbed-labels"><label for="__tabbed_1_1">via pipx</label><label for="__tabbed_1_2">via poetry self</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="language-shell highlight"><span class="filename">$ Execução no terminal!</span><pre><span></span><code><span id="__span-3-1"><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a>pipx<span class="w"> </span>inject<span class="w"> </span>poetry<span class="w"> </span>poetry-plugin-shell<span class="w"> </span><span class="c1">#(1)!</span>
</span></code></pre></div>
<ol>
<li>O comando <code>inject</code> instala um pacote em um ambiente virtual "global" já criado. Neste caso, estamos injetando o comando <code>poetry shell</code>, que nos permite entrar nos ambientes virtuais.</li>
</ol>
</div>
<div class="tabbed-block">
<div class="language-shell highlight"><span class="filename">$ Execução no terminal!</span><pre><span></span><code><span id="__span-4-1"><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a>poetry<span class="w"> </span>self<span class="w"> </span>add<span class="w"> </span>poetry-plugin-shell<span class="w"> </span><span class="c1">#(1)!</span>
</span></code></pre></div>
<ol>
<li>A função <code>self add</code> do Poetry instala extensões para podermos executar novos comandos com o Poetry, neste caso, o comando <code>poetry shell</code>, que nos permite entrar nos ambientes virtuais.</li>
</ol>
</div>
</div>
</div>
<p>Essa extensão adiciona o comando <code>poetry shell</code>, que habilita o ambiente virtual no terminal.</p>
<h3 id="gerenciamento-de-versoes-do-python">Gerenciamento de versões do Python</h3>
<p>Após a instalação do Poetry, podemos utilizá-lo para gerenciar e instalar versões do Python que desejamos usar em um projeto. Para acompanhar este curso, a versão mínima do Python que você deve ter é a <code class="language-python highlight"><span class="mf">3.11</span></code>, pois alguns recursos que utilizaremos foram introduzidos nessa versão.</p>
<p>Você pode, no entanto, instalar qualquer versão mais nova. Minha recomendação é <strong>sempre que possível</strong>, use a versão mais atualizada possível:</p>
<div class="tabbed-set tabbed-alternate" data-tabs="2:3"><input checked id="__tabbed_2_1" name="__tabbed_2" type="radio"><input id="__tabbed_2_2" name="__tabbed_2" type="radio"><input id="__tabbed_2_3" name="__tabbed_2" type="radio"><div class="tabbed-labels"><label for="__tabbed_2_1">Versão 3.13</label><label for="__tabbed_2_2">Versão 3.12</label><label for="__tabbed_2_3">Versão 3.11</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p>Para utilizarmos uma versão específica do Python em nosso ambiente, devemos solicitar ao Poetry que instale essa versão:
</p><div class="language-bash highlight"><span class="filename">$ Execução no terminal!</span><pre><span></span><code><span id="__span-5-1"><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a>poetry<span class="w"> </span>python<span class="w"> </span>install<span class="w"> </span><span class="m">3</span>.13<span class="w">  </span><span class="c1">#(1)!</span>
</span></code></pre></div>
<ol>
<li>Instala a última release da versão 3.13 do python</li>
</ol>
<p>Uma resposta similar a esta deve ser retornada ao executar o comando:</p>
<div class="language-bash highlight"><span class="filename">Resposta do comando `poetry python install`</span><pre><span></span><code><span id="__span-6-1"><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a>Downloading<span class="w"> </span>and<span class="w"> </span>installing<span class="w"> </span><span class="m">3</span>.13.2<span class="w"> </span><span class="o">(</span>cpython<span class="o">)</span><span class="w"> </span>...<span class="w"> </span>Done<span class="w"> </span><span class="c1">#(1)!</span>
</span><span id="__span-6-2"><a id="__codelineno-6-2" name="__codelineno-6-2" href="#__codelineno-6-2"></a>Testing<span class="w"> </span><span class="m">3</span>.13.2<span class="w"> </span><span class="o">(</span>cpython<span class="o">)</span><span class="w"> </span>...<span class="w"> </span>Done
</span></code></pre></div>
<ol>
<li>3.13.2 é a última release da versão lançada enquanto esscrevia esse material.</li>
</ol>
</div>
<div class="tabbed-block">
<p>Para utilizarmos uma versão específica do Python em nosso ambiente, devemos solicitar ao Poetry que instale essa versão:
</p><div class="language-bash highlight"><span class="filename">$ Execução no terminal!</span><pre><span></span><code><span id="__span-7-1"><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a>poetry<span class="w"> </span>python<span class="w"> </span>install<span class="w"> </span><span class="m">3</span>.12<span class="w">  </span><span class="c1">#(1)!</span>
</span></code></pre></div>
<ol>
<li>Instala a última release da versão 3.12 do python</li>
</ol>
<p>Uma resposta similar a esta deve ser retornada ao executar o comando:</p>
<div class="language-bash highlight"><span class="filename">Resposta do comando `poetry python install`</span><pre><span></span><code><span id="__span-8-1"><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a>Downloading<span class="w"> </span>and<span class="w"> </span>installing<span class="w"> </span><span class="m">3</span>.12.9<span class="w"> </span><span class="o">(</span>cpython<span class="o">)</span><span class="w"> </span>...<span class="w"> </span>Done<span class="w"> </span><span class="c1">#(1)!</span>
</span><span id="__span-8-2"><a id="__codelineno-8-2" name="__codelineno-8-2" href="#__codelineno-8-2"></a>Testing<span class="w"> </span><span class="m">3</span>.12.9<span class="w"> </span><span class="o">(</span>cpython<span class="o">)</span><span class="w"> </span>...<span class="w"> </span>Done
</span></code></pre></div>
<ol>
<li>3.12.9 é a última release da versão lançada enquanto esscrevia esse material.</li>
</ol>
</div>
<div class="tabbed-block">
<p>Para utilizarmos uma versão específica do Python em nosso ambiente, devemos solicitar ao Poetry que instale essa versão:
</p><div class="language-bash highlight"><span class="filename">$ Execução no terminal!</span><pre><span></span><code><span id="__span-9-1"><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a>poetry<span class="w"> </span>python<span class="w"> </span>install<span class="w"> </span><span class="m">3</span>.11<span class="w">  </span><span class="c1">#(1)!</span>
</span></code></pre></div>
<ol>
<li>Instala a última release da versão 3.11 do python</li>
</ol>
<p>Uma resposta similar a esta deve ser retornada ao executar o comando:</p>
<div class="language-bash highlight"><span class="filename">Resposta do comando `poetry python install`</span><pre><span></span><code><span id="__span-10-1"><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a>Downloading<span class="w"> </span>and<span class="w"> </span>installing<span class="w"> </span><span class="m">3</span>.11.11<span class="w"> </span><span class="o">(</span>cpython<span class="o">)</span><span class="w"> </span>...<span class="w"> </span>Done<span class="w"> </span><span class="c1">#(1)!</span>
</span><span id="__span-10-2"><a id="__codelineno-10-2" name="__codelineno-10-2" href="#__codelineno-10-2"></a>Testing<span class="w"> </span><span class="m">3</span>.11.11<span class="w"> </span><span class="o">(</span>cpython<span class="o">)</span><span class="w"> </span>...<span class="w"> </span>Done
</span></code></pre></div>
<ol>
<li>3.11.11 é a última release da versão lançada enquanto esscrevia esse material.</li>
</ol>
</div>
</div>
</div>
<p>Dessa forma, garantimos que temos uma versão compatível do Python instalada.</p>
<h2 id="criando-um-projeto">Criando um projeto</h2>
<p>Agora que temos o poetry e a versão do python que usaremos disponível, podemos iniciar a criação do nosso projeto. O primeiro passo é criar um novo projeto utilizando o Poetry, com o comando <code>poetry new</code>. Em seguida, navegaremos até o diretório criado:</p>
<div class="language-shell highlight"><span class="filename">$ Execução no terminal!</span><pre><span></span><code><span id="__span-11-1"><a id="__codelineno-11-1" name="__codelineno-11-1" href="#__codelineno-11-1"></a>poetry<span class="w"> </span>new<span class="w"> </span>--flat<span class="w"> </span>fast_zero<span class="w"> </span><span class="c1">#(1)!</span>
</span><span id="__span-11-2"><a id="__codelineno-11-2" name="__codelineno-11-2" href="#__codelineno-11-2"></a><span class="nb">cd</span><span class="w"> </span>fast_zero
</span></code></pre></div>
<ol>
<li>Cria um pacote python chamado <code>fast_zero</code> no formato <code>flat</code>. Por padrão, o poetry utiliza o formato <code>src</code>. Mais informações sobre isso <a href="https://packaging.python.org/en/latest/discussions/src-layout-vs-flat-layout/" target="_blank">aqui</a></li>
</ol>
<p>Ele criará uma estrutura de arquivos e pastas como essa:</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-12-1"><a id="__codelineno-12-1" name="__codelineno-12-1" href="#__codelineno-12-1"></a>.
</span><span id="__span-12-2"><a id="__codelineno-12-2" name="__codelineno-12-2" href="#__codelineno-12-2"></a>├── fast_zero
</span><span id="__span-12-3"><a id="__codelineno-12-3" name="__codelineno-12-3" href="#__codelineno-12-3"></a>│  └── __init__.py
</span><span id="__span-12-4"><a id="__codelineno-12-4" name="__codelineno-12-4" href="#__codelineno-12-4"></a>├── pyproject.toml
</span><span id="__span-12-5"><a id="__codelineno-12-5" name="__codelineno-12-5" href="#__codelineno-12-5"></a>├── README.md
</span><span id="__span-12-6"><a id="__codelineno-12-6" name="__codelineno-12-6" href="#__codelineno-12-6"></a>└── tests
</span><span id="__span-12-7"><a id="__codelineno-12-7" name="__codelineno-12-7" href="#__codelineno-12-7"></a>   └── __init__.py
</span></code></pre></div>
<p>Com a estrutura inicial do projeto criada e estando no diretório do projeto, podemos informar ao Poetry que queremos usar a versão do Python que instalamos. Para isso, utilizamos o seguinte comando:</p>
<div class="tabbed-set tabbed-alternate" data-tabs="3:3"><input checked id="__tabbed_3_1" name="__tabbed_3" type="radio"><input id="__tabbed_3_2" name="__tabbed_3" type="radio"><input id="__tabbed_3_3" name="__tabbed_3" type="radio"><div class="tabbed-labels"><label for="__tabbed_3_1">Versão 3.13</label><label for="__tabbed_3_2">Versão 3.12</label><label for="__tabbed_3_3">Versão 3.11</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="language-shell highlight"><span class="filename">$ Execução no terminal!</span><pre><span></span><code><span id="__span-13-1"><a id="__codelineno-13-1" name="__codelineno-13-1" href="#__codelineno-13-1"></a>poetry<span class="w"> </span>env<span class="w"> </span>use<span class="w"> </span><span class="m">3</span>.13
</span></code></pre></div>
<p>Em conjunto com essa instrução, devemos também especificar no Poetry que usaremos exatamente a versão <code>3.13</code> em nosso projeto. Para isso, alteramos o arquivo de configuração pyproject.toml na raiz do projeto:</p>
<div class="language-toml highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">pyproject.toml</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-14-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-14-10">10</a></span>
<span class="normal"><a href="#__codelineno-14-11">11</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-14-9"><a id="__codelineno-14-9" name="__codelineno-14-9"></a><span class="k">[project]</span>
</span><span id="__span-14-10"><a id="__codelineno-14-10" name="__codelineno-14-10"></a><span class="c1"># ...</span>
</span><span id="__span-14-11"><a id="__codelineno-14-11" name="__codelineno-14-11"></a><span class="n">requires-python</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"&gt;=3.13,&lt;4.0"</span><span class="w"> </span><span class="c1"># (1)!</span>
</span></code></pre></div></td></tr></table></div>
<ol>
<li>A expressão <code>"&gt;=3.13,&lt;4.0"</code> significa que qualquer versão maior ou igual a <code>3.13</code> e menor que 4.0 será válida para o projeto.</li>
</ol>
</div>
<div class="tabbed-block">
<div class="language-shell highlight"><span class="filename">$ Execução no terminal!</span><pre><span></span><code><span id="__span-15-1"><a id="__codelineno-15-1" name="__codelineno-15-1" href="#__codelineno-15-1"></a>poetry<span class="w"> </span>env<span class="w"> </span>use<span class="w"> </span><span class="m">3</span>.12
</span></code></pre></div>
<p>Em conjunto com essa instrução, devemos também especificar no Poetry que usaremos exatamente a versão <code>3.12</code> em nosso projeto. Para isso, alteramos o arquivo de configuração pyproject.toml na raiz do projeto:</p>
<div class="language-toml highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">pyproject.toml</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-16-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-16-10">10</a></span>
<span class="normal"><a href="#__codelineno-16-11">11</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-16-9"><a id="__codelineno-16-9" name="__codelineno-16-9"></a><span class="k">[project]</span>
</span><span id="__span-16-10"><a id="__codelineno-16-10" name="__codelineno-16-10"></a><span class="c1"># ...</span>
</span><span id="__span-16-11"><a id="__codelineno-16-11" name="__codelineno-16-11"></a><span class="n">requires-python</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"&gt;=3.12,&lt;4.0"</span><span class="w"> </span><span class="c1"># (1)!</span>
</span></code></pre></div></td></tr></table></div>
<ol>
<li>A expressão <code>"&gt;=3.12,&lt;4.0"</code> significa que qualquer versão maior ou igual a <code>3.12</code> e menor que 4.0 será válida para o projeto.</li>
</ol>
</div>
<div class="tabbed-block">
<div class="language-shell highlight"><span class="filename">$ Execução no terminal!</span><pre><span></span><code><span id="__span-17-1"><a id="__codelineno-17-1" name="__codelineno-17-1" href="#__codelineno-17-1"></a>poetry<span class="w"> </span>env<span class="w"> </span>use<span class="w"> </span><span class="m">3</span>.11
</span></code></pre></div>
<p>Em conjunto com essa instrução, devemos também especificar no Poetry que usaremos exatamente a versão <code>3.11</code> em nosso projeto. Para isso, alteramos o arquivo de configuração pyproject.toml na raiz do projeto:</p>
<div class="language-toml highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">pyproject.toml</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-18-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-18-10">10</a></span>
<span class="normal"><a href="#__codelineno-18-11">11</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-18-9"><a id="__codelineno-18-9" name="__codelineno-18-9"></a><span class="k">[project]</span>
</span><span id="__span-18-10"><a id="__codelineno-18-10" name="__codelineno-18-10"></a><span class="c1"># ...</span>
</span><span id="__span-18-11"><a id="__codelineno-18-11" name="__codelineno-18-11"></a><span class="n">requires-python</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"&gt;=3.11,&lt;4.0"</span><span class="w"> </span><span class="c1"># (1)!</span>
</span></code></pre></div></td></tr></table></div>
<ol>
<li>A expressão <code>"&gt;=3.11,&lt;4.0"</code> significa que qualquer versão maior ou igual a <code>3.11</code> e menor que 4.0 será válida para o projeto.</li>
</ol>
</div>
</div>
</div>
<p>Dessa forma, garantimos que o Poetry usará a versão correta do Python ao criar o ambiente virtual para o nosso projeto.</p>
<h3 id="instalando-o-fastapi">Instalando o FastAPI</h3>
<p>Com toda a base do nosso projeto pronta, podemos finalmente instalar o FastAPI:</p>
<div class="language-shell highlight"><span class="filename">$ Execução no terminal!</span><pre><span></span><code><span id="__span-19-1"><a id="__codelineno-19-1" name="__codelineno-19-1" href="#__codelineno-19-1"></a>poetry<span class="w"> </span>install<span class="w"> </span><span class="c1"># (1)!</span>
</span><span id="__span-19-2"><a id="__codelineno-19-2" name="__codelineno-19-2" href="#__codelineno-19-2"></a>poetry<span class="w"> </span>add<span class="w"> </span><span class="s1">'fastapi[standard]'</span><span class="w"> </span><span class="c1"># (2)!</span>
</span></code></pre></div>
<ol>
<li>Cria o ambiente virtual com a versão que setamos no <code>env use</code></li>
<li>Adiciona o FastAPI no nosso projeto e ambiente virtual</li>
</ol>
<h3 id="primeira-execucao-de-um-hello-world">Primeira Execução de um "Hello, World!"</h3>
<p>Uma coisa bastante interessante sobre o FastAPI é que ele é um framework web baseado em funções. Da mesma forma em que criamos funções tradicionalmente em python, podemos estender essas funções para que elas sejam servidas pelo servidor. Por exemplo:</p>
<div class="language-py highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">fast_zero/app.py</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-20-1">1</a></span>
<span class="normal"><a href="#__codelineno-20-2">2</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-20-1"><a id="__codelineno-20-1" name="__codelineno-20-1"></a><span class="k">def</span><span class="w"> </span><span class="nf">read_root</span><span class="p">():</span>
</span><span id="__span-20-2"><a id="__codelineno-20-2" name="__codelineno-20-2"></a>    <span class="k">return</span> <span class="p">{</span><span class="s1">'message'</span><span class="p">:</span> <span class="s1">'Olá Mundo!'</span><span class="p">}</span>
</span></code></pre></div></td></tr></table></div>
<p>Essa função em python basicamente retorna um dicionário com uma chave chamada <code class="language-python highlight"><span class="s1">'message'</span></code> e uma mensagem <code class="language-python highlight"><span class="s1">'Olá Mundo!'</span></code>. Se adicionarmos essa função em novo arquivo chamado <code>app.py</code> no diretório <code>fast_zero</code>. Podemos fazer a chamada dela pelo terminal interativo (<strong>REPL</strong>):</p>
<div class="language-py highlight"><span class="filename">&gt;&gt;&gt; Terminal interativo!</span><pre><span></span><code><span id="__span-21-1"><a id="__codelineno-21-1" name="__codelineno-21-1" href="#__codelineno-21-1"></a><span class="o">&gt;&gt;&gt;</span> <span class="n">read_root</span><span class="p">()</span>
</span><span id="__span-21-2"><a id="__codelineno-21-2" name="__codelineno-21-2" href="#__codelineno-21-2"></a><span class="p">{</span><span class="s1">'message'</span><span class="p">:</span> <span class="s1">'Olá Mundo!'</span><span class="p">}</span>
</span></code></pre></div>
<p>De forma tradicional, como todas as funções em python.</p>
<details class="tip">
<summary>Dica: Como abrir o terminal interativo (REPL)</summary>
<p>Para abrir o terminal interativo com o seu código carregado, você deve chamar o Python no terminal usando <code>-i</code>:</p>
<div class="language-shell highlight"><span class="filename">$ Execução no terminal!</span><pre><span></span><code><span id="__span-22-1"><a id="__codelineno-22-1" name="__codelineno-22-1" href="#__codelineno-22-1"></a>python<span class="w"> </span>-i<span class="w"> </span>&lt;seu_arquivo.py&gt;
</span></code></pre></div>
<p>O interpretador do Python executa o código do arquivo e retorna o shell após executar tudo que está escrito no arquivo.</p>
<p>Para o nosso caso específico, como o nome do arquivo é <code>fast_zero/app.py</code>, devemos executar esse comando no terminal:</p>
<div class="language-shell highlight"><span class="filename">$ Execução no terminal!</span><pre><span></span><code><span id="__span-23-1"><a id="__codelineno-23-1" name="__codelineno-23-1" href="#__codelineno-23-1"></a>python<span class="w"> </span>-i<span class="w"> </span>fast_zero/app.py
</span></code></pre></div>
</details>
<p>Desta forma, usando somente um decorador do FastAPI, podemos fazer com que uma determinada função seja acessível pela rede:</p>
<div class="language-python highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">fast_zero/app.py</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-24-1">1</a></span>
<span class="normal"><a href="#__codelineno-24-2">2</a></span>
<span class="normal"><a href="#__codelineno-24-3">3</a></span>
<span class="normal"><a href="#__codelineno-24-4">4</a></span>
<span class="normal"><a href="#__codelineno-24-5">5</a></span>
<span class="normal"><a href="#__codelineno-24-6">6</a></span>
<span class="normal"><a href="#__codelineno-24-7">7</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-24-1"><a id="__codelineno-24-1" name="__codelineno-24-1"></a><span class="kn">from</span><span class="w"> </span><span class="nn">fastapi</span><span class="w"> </span><span class="kn">import</span> <span class="n">FastAPI</span> <span class="c1"># (1)!</span>
</span><span id="__span-24-2"><a id="__codelineno-24-2" name="__codelineno-24-2"></a>
</span><span id="__span-24-3"><a id="__codelineno-24-3" name="__codelineno-24-3"></a><span class="n">app</span> <span class="o">=</span> <span class="n">FastAPI</span><span class="p">()</span>  <span class="c1"># (2)!</span>
</span><span id="__span-24-4"><a id="__codelineno-24-4" name="__codelineno-24-4"></a>
</span><span id="__span-24-5"><a id="__codelineno-24-5" name="__codelineno-24-5"></a><span class="hll"><span class="nd">@app</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">'/'</span><span class="p">)</span>  <span class="c1"># (3)!</span>
</span></span><span id="__span-24-6"><a id="__codelineno-24-6" name="__codelineno-24-6"></a><span class="k">def</span><span class="w"> </span><span class="nf">read_root</span><span class="p">():</span>  <span class="c1"># (4)!</span>
</span><span id="__span-24-7"><a id="__codelineno-24-7" name="__codelineno-24-7"></a>    <span class="k">return</span> <span class="p">{</span><span class="s1">'message'</span><span class="p">:</span> <span class="s1">'Olá Mundo!'</span><span class="p">}</span> <span class="c1"># (5)!</span>
</span></code></pre></div></td></tr></table></div>
<ol>
<li>Importando da biblioteca fastapi o objeto FastAPI</li>
<li>Iniciando uma aplicação FastAPI</li>
<li>Definindo um endpoint com o endereço <code>/</code> acessível pelo método HTTP <code>GET</code></li>
<li>Função que será executada quando o endereço <code>/</code> for acessado por um cliente</li>
<li>Os dados que serão retornados pelo endereço, quando o endpoint for chamado</li>
</ol>
<p>A linha em destaque <code class="language-python highlight"><span class="nd">@app</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">'/'</span><span class="p">)</span></code> expõe a nossa função para ser servida pelo FastAPI. Dizendo que quando um cliente acessar o nosso endereço de rede no caminho <code>/</code>, usando o método HTTP GET<sup id="fnref:2"><a class="footnote-ref" href="#fn:2">2</a></sup>, a função será executada. Desta maneira, temos todo o código necessário para criar nossa primeira aplicação web com FastAPI.</p>
<p>Antes de iniciarmos nossa aplicação, temos que fazer um passo importante, habilitar o ambiente virtual, para que o python consiga enxergar nossas dependências instaladas. O poetry tem um comando específico para isso:</p>
<div class="language-shell highlight"><span class="filename">$ Execução no terminal!</span><pre><span></span><code><span id="__span-25-1"><a id="__codelineno-25-1" name="__codelineno-25-1" href="#__codelineno-25-1"></a>poetry<span class="w"> </span>shell
</span></code></pre></div>
<p>Agora com o ambiente virtual ativo, podemos iniciar nosso servidor FastAPI para iniciar nossa aplicação:</p>
<div class="language-shell highlight"><span class="filename">$ Execução no terminal!</span><pre><span></span><code><span id="__span-26-1"><a id="__codelineno-26-1" name="__codelineno-26-1" href="#__codelineno-26-1"></a>fastapi<span class="w"> </span>dev<span class="w"> </span>fast_zero/app.py
</span></code></pre></div>
<p>Esse comando diz ao FastAPI para iniciar o servidor de desenvolvimento (<code>dev</code>) usando o arquivo <code>fast_zero/app.py</code></p>
<details class="tip" open="open">
<summary>Executar de fora do ambiente virtual</summary>
<p>Também é possível executar os comandos sem entrar no shell do ambiente virtual. É mais verboso, mas funciona bem:</p>
<div class="language-shell highlight"><span class="filename">$ Execução no terminal!</span><pre><span></span><code><span id="__span-27-1"><a id="__codelineno-27-1" name="__codelineno-27-1" href="#__codelineno-27-1"></a>poetry<span class="w"> </span>run<span class="w"> </span>fastapi<span class="w"> </span>dev<span class="w"> </span>fast_zero/app.py
</span></code></pre></div>
<p>Isso evita rodar a combinação de comandos:
</p><div class="language-shell highlight"><span class="filename">$ Execução no terminal!</span><pre><span></span><code><span id="__span-28-1"><a id="__codelineno-28-1" name="__codelineno-28-1" href="#__codelineno-28-1"></a>poetry<span class="w"> </span>shell
</span><span id="__span-28-2"><a id="__codelineno-28-2" name="__codelineno-28-2" href="#__codelineno-28-2"></a>fastapi<span class="w"> </span>dev<span class="w"> </span>fast_zero/app.py
</span></code></pre></div>
</details>
<p>A resposta do comando no terminal deve ser parecida com essa:</p>
<div class="language-shell highlight"><span class="filename">Resposta do comando `fastapi dev fast_zero/app.py`</span><pre><span></span><code><span id="__span-29-1"><a id="__codelineno-29-1" name="__codelineno-29-1" href="#__codelineno-29-1"></a>INFO<span class="w">     </span>Using<span class="w"> </span>path<span class="w"> </span>fast_zero/app.py
</span><span id="__span-29-2"><a id="__codelineno-29-2" name="__codelineno-29-2" href="#__codelineno-29-2"></a>INFO<span class="w">     </span>Resolved<span class="w"> </span>absolute<span class="w"> </span>path<span class="w"> </span>/home/dunossauro/git/fastapi-do-zero/codigo_das_aulas/01/fast_zero/app.py
</span><span id="__span-29-3"><a id="__codelineno-29-3" name="__codelineno-29-3" href="#__codelineno-29-3"></a>INFO<span class="w">     </span>Searching<span class="w"> </span><span class="k">for</span><span class="w"> </span>package<span class="w"> </span>file<span class="w"> </span>structure<span class="w"> </span>from<span class="w"> </span>directories<span class="w"> </span>with<span class="w"> </span>__init__.py<span class="w"> </span>files
</span><span id="__span-29-4"><a id="__codelineno-29-4" name="__codelineno-29-4" href="#__codelineno-29-4"></a>INFO<span class="w">     </span>Importing<span class="w"> </span>from<span class="w"> </span>/home/dunossauro/git/fastapi-do-zero/codigo_das_aulas/01
</span><span id="__span-29-5"><a id="__codelineno-29-5" name="__codelineno-29-5" href="#__codelineno-29-5"></a>
</span><span id="__span-29-6"><a id="__codelineno-29-6" name="__codelineno-29-6" href="#__codelineno-29-6"></a><span class="w"> </span>╭─<span class="w"> </span>Python<span class="w"> </span>package<span class="w"> </span>file<span class="w"> </span>structure<span class="w"> </span>─╮
</span><span id="__span-29-7"><a id="__codelineno-29-7" name="__codelineno-29-7" href="#__codelineno-29-7"></a><span class="w"> </span>│<span class="w">                                 </span>│
</span><span id="__span-29-8"><a id="__codelineno-29-8" name="__codelineno-29-8" href="#__codelineno-29-8"></a><span class="w"> </span>│<span class="w">  </span>📁<span class="w"> </span>fast_zero<span class="w">                   </span>│
</span><span id="__span-29-9"><a id="__codelineno-29-9" name="__codelineno-29-9" href="#__codelineno-29-9"></a><span class="w"> </span>│<span class="w">  </span>├──<span class="w"> </span>🐍<span class="w"> </span>__init__.py<span class="w">             </span>│
</span><span id="__span-29-10"><a id="__codelineno-29-10" name="__codelineno-29-10" href="#__codelineno-29-10"></a><span class="w"> </span>│<span class="w">  </span>└──<span class="w"> </span>🐍<span class="w"> </span>app.py<span class="w">                  </span>│
</span><span id="__span-29-11"><a id="__codelineno-29-11" name="__codelineno-29-11" href="#__codelineno-29-11"></a><span class="w"> </span>│<span class="w">                                 </span>│
</span><span id="__span-29-12"><a id="__codelineno-29-12" name="__codelineno-29-12" href="#__codelineno-29-12"></a><span class="w"> </span>╰─────────────────────────────────╯
</span><span id="__span-29-13"><a id="__codelineno-29-13" name="__codelineno-29-13" href="#__codelineno-29-13"></a>
</span><span id="__span-29-14"><a id="__codelineno-29-14" name="__codelineno-29-14" href="#__codelineno-29-14"></a>INFO<span class="w">     </span>Importing<span class="w"> </span>module<span class="w"> </span>fast_zero.app
</span><span id="__span-29-15"><a id="__codelineno-29-15" name="__codelineno-29-15" href="#__codelineno-29-15"></a>INFO<span class="w">     </span>Found<span class="w"> </span>importable<span class="w"> </span>FastAPI<span class="w"> </span>app
</span><span id="__span-29-16"><a id="__codelineno-29-16" name="__codelineno-29-16" href="#__codelineno-29-16"></a>
</span><span id="__span-29-17"><a id="__codelineno-29-17" name="__codelineno-29-17" href="#__codelineno-29-17"></a><span class="w"> </span>╭────<span class="w"> </span>Importable<span class="w"> </span>FastAPI<span class="w"> </span>app<span class="w"> </span>─────╮
</span><span id="__span-29-18"><a id="__codelineno-29-18" name="__codelineno-29-18" href="#__codelineno-29-18"></a><span class="w"> </span>│<span class="w">                                 </span>│
</span><span id="__span-29-19"><a id="__codelineno-29-19" name="__codelineno-29-19" href="#__codelineno-29-19"></a><span class="w"> </span>│<span class="w">  </span>from<span class="w"> </span>fast_zero.app<span class="w"> </span>import<span class="w"> </span>app<span class="w">  </span>│
</span><span id="__span-29-20"><a id="__codelineno-29-20" name="__codelineno-29-20" href="#__codelineno-29-20"></a><span class="w"> </span>│<span class="w">                                 </span>│
</span><span id="__span-29-21"><a id="__codelineno-29-21" name="__codelineno-29-21" href="#__codelineno-29-21"></a><span class="w"> </span>╰─────────────────────────────────╯
</span><span id="__span-29-22"><a id="__codelineno-29-22" name="__codelineno-29-22" href="#__codelineno-29-22"></a>
</span><span id="__span-29-23"><a id="__codelineno-29-23" name="__codelineno-29-23" href="#__codelineno-29-23"></a>INFO<span class="w">     </span>Using<span class="w"> </span>import<span class="w"> </span>string<span class="w"> </span>fast_zero.app:app
</span><span id="__span-29-24"><a id="__codelineno-29-24" name="__codelineno-29-24" href="#__codelineno-29-24"></a>
</span><span id="__span-29-25"><a id="__codelineno-29-25" name="__codelineno-29-25" href="#__codelineno-29-25"></a><span class="w"> </span>╭──────────<span class="w"> </span>FastAPI<span class="w"> </span>CLI<span class="w"> </span>-<span class="w"> </span>Development<span class="w"> </span>mode<span class="w"> </span>───────────╮
</span><span id="__span-29-26"><a id="__codelineno-29-26" name="__codelineno-29-26" href="#__codelineno-29-26"></a><span class="w"> </span>│<span class="w">                                                     </span>│
</span><span id="__span-29-27"><a id="__codelineno-29-27" name="__codelineno-29-27" href="#__codelineno-29-27"></a><span class="hll"><span class="w"> </span>│<span class="w">  </span>Serving<span class="w"> </span>at:<span class="w"> </span>http://127.0.0.1:8000<span class="w">                  </span>│
</span></span><span id="__span-29-28"><a id="__codelineno-29-28" name="__codelineno-29-28" href="#__codelineno-29-28"></a><span class="w"> </span>│<span class="w">                                                     </span>│
</span><span id="__span-29-29"><a id="__codelineno-29-29" name="__codelineno-29-29" href="#__codelineno-29-29"></a><span class="w"> </span>│<span class="w">  </span>API<span class="w"> </span>docs:<span class="w"> </span>http://127.0.0.1:8000/docs<span class="w">               </span>│
</span><span id="__span-29-30"><a id="__codelineno-29-30" name="__codelineno-29-30" href="#__codelineno-29-30"></a><span class="w"> </span>│<span class="w">                                                     </span>│
</span><span id="__span-29-31"><a id="__codelineno-29-31" name="__codelineno-29-31" href="#__codelineno-29-31"></a><span class="w"> </span>│<span class="w">  </span>Running<span class="w"> </span><span class="k">in</span><span class="w"> </span>development<span class="w"> </span>mode,<span class="w"> </span><span class="k">for</span><span class="w"> </span>production<span class="w"> </span>use:<span class="w">   </span>│
</span><span id="__span-29-32"><a id="__codelineno-29-32" name="__codelineno-29-32" href="#__codelineno-29-32"></a><span class="w"> </span>│<span class="w">                                                     </span>│
</span><span id="__span-29-33"><a id="__codelineno-29-33" name="__codelineno-29-33" href="#__codelineno-29-33"></a><span class="w"> </span>│<span class="w">  </span>fastapi<span class="w"> </span>run<span class="w">                                        </span>│
</span><span id="__span-29-34"><a id="__codelineno-29-34" name="__codelineno-29-34" href="#__codelineno-29-34"></a><span class="w"> </span>│<span class="w">                                                     </span>│
</span><span id="__span-29-35"><a id="__codelineno-29-35" name="__codelineno-29-35" href="#__codelineno-29-35"></a><span class="w"> </span>╰─────────────────────────────────────────────────────╯
</span><span id="__span-29-36"><a id="__codelineno-29-36" name="__codelineno-29-36" href="#__codelineno-29-36"></a>
</span><span id="__span-29-37"><a id="__codelineno-29-37" name="__codelineno-29-37" href="#__codelineno-29-37"></a>INFO:<span class="w">     </span>Will<span class="w"> </span>watch<span class="w"> </span><span class="k">for</span><span class="w"> </span>changes<span class="w"> </span><span class="k">in</span><span class="w"> </span>these<span class="w"> </span>directories:<span class="w"> </span><span class="o">[</span><span class="s1">'/home/dunossauro/git/fastapi-do-zero/codigo_das_aulas/01'</span><span class="o">]</span>
</span><span id="__span-29-38"><a id="__codelineno-29-38" name="__codelineno-29-38" href="#__codelineno-29-38"></a><span class="hll">INFO:<span class="w">     </span>Uvicorn<span class="w"> </span>running<span class="w"> </span>on<span class="w"> </span>http://127.0.0.1:8000<span class="w"> </span><span class="o">(</span>Press<span class="w"> </span>CTRL+C<span class="w"> </span>to<span class="w"> </span>quit<span class="o">)</span>
</span></span><span id="__span-29-39"><a id="__codelineno-29-39" name="__codelineno-29-39" href="#__codelineno-29-39"></a><span class="hll">INFO:<span class="w">     </span>Started<span class="w"> </span>reloader<span class="w"> </span>process<span class="w"> </span><span class="o">[</span><span class="m">893203</span><span class="o">]</span><span class="w"> </span>using<span class="w"> </span>WatchFiles
</span></span><span id="__span-29-40"><a id="__codelineno-29-40" name="__codelineno-29-40" href="#__codelineno-29-40"></a><span class="hll">INFO:<span class="w">     </span>Started<span class="w"> </span>server<span class="w"> </span>process<span class="w"> </span><span class="o">[</span><span class="m">893207</span><span class="o">]</span>
</span></span><span id="__span-29-41"><a id="__codelineno-29-41" name="__codelineno-29-41" href="#__codelineno-29-41"></a><span class="hll">INFO:<span class="w">     </span>Waiting<span class="w"> </span><span class="k">for</span><span class="w"> </span>application<span class="w"> </span>startup.
</span></span><span id="__span-29-42"><a id="__codelineno-29-42" name="__codelineno-29-42" href="#__codelineno-29-42"></a><span class="hll">INFO:<span class="w">     </span>Application<span class="w"> </span>startup<span class="w"> </span>complete.
</span></span></code></pre></div>
<p>A mensagem de resposta do CLI: <code>serving: http://127.0.0.1:8000</code> tem uma informação bastante importante.</p>
<p><a class="glightbox" href="../assets/01/endereco_http_black.png#only-light" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt='Figura representando a divisão para "protocolo" com "http://" , "endereço" com "127.0.0.1" e "porta" com ":8000"' class="center" src="../assets/01/endereco_http_black.png#only-light"></a>
<a class="glightbox" href="../assets/01/endereco_http_white.png#only-dark" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt='Figura representando a divisão para "protocolo" com "http://" , "endereço" com "127.0.0.1" e "porta" com ":8000"' class="center" src="../assets/01/endereco_http_white.png#only-dark"></a></p>
<ol>
<li>Ela nos mostra qual protocolo está sendo utilizado, no caso o HTTP, que é o protocolo padrão da web;</li>
<li>O endereço de rede (IP) que está escutando, no caso <code>127.0.0.1</code>, endereço especial (<a href="https://pt.wikipedia.org/wiki/Loopback#Protocolo_de_Interface_de_Rede_Virtual_da_Internet" target="_blank">loopback</a>) que aponta para a nossa própria máquina;</li>
<li>A porta <code>:8000</code>, a qual é a porta da nossa máquina que está reservada para nossa aplicação.</li>
</ol>
<p>Agora, com o servidor inicializado, podemos usar um cliente para acessar o endereço <a href="http://127.0.0.1:8000" target="_blank">http://127.0.0.1:8000</a>.</p>
<p>O cliente mais tradicional da web é o navegador, podemos digitar o endereço na barra de navegação e se tudo ocorreu corretamente, você deve ver a mensagem "Olá Mundo!" em formato JSON.</p>
<p><a class="glightbox" href="../assets/01/nagevador_com_localhost.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt='Captura de tela do browser acessando "http://127.0.0.1"' class="center shadow" src="../assets/01/nagevador_com_localhost.png"></a></p>
<blockquote>
<p>Para parar a execução do fastapi no shell, você pode digitar <span class="keys"><kbd class="key-control">Ctrl</kbd><span>+</span><kbd class="key-c">C</kbd></span> e a mensagem <code>Shutting down</code> aparecerá, mostrando que o servidor foi finalizado.</p>
</blockquote>
<details class="example">
<summary>Diferentes clientes para nossa aplicação</summary>
<p>Caso exista uma curiosidade sobre outros clientes HTTP que não o browser, podemos usar aplicações de linha de comando como a tradicional <a href="https://curl.se/" target="_blank">curl</a>:</p>
<div class="language-shell highlight"><span class="filename">$ Execução no terminal!</span><pre><span></span><code><span id="__span-30-1"><a id="__codelineno-30-1" name="__codelineno-30-1" href="#__codelineno-30-1"></a>curl<span class="w"> </span><span class="m">127</span>.0.0.1:8000
</span><span id="__span-30-2"><a id="__codelineno-30-2" name="__codelineno-30-2" href="#__codelineno-30-2"></a><span class="o">{</span><span class="s2">"message"</span>:<span class="s2">"Olá Mundo!"</span><span class="o">}</span>
</span></code></pre></div>
<p>Ou o meu cliente HTTP preferido (escrito em python), o <a href="https://httpie.io/" target="_blank">HTTPie</a>:</p>
<div class="language-shell highlight"><span class="filename">$ Execução no terminal!</span><pre><span></span><code><span id="__span-31-1"><a id="__codelineno-31-1" name="__codelineno-31-1" href="#__codelineno-31-1"></a>http<span class="w"> </span><span class="m">127</span>.0.0.1:8000
</span><span id="__span-31-2"><a id="__codelineno-31-2" name="__codelineno-31-2" href="#__codelineno-31-2"></a>HTTP/1.1<span class="w"> </span><span class="m">200</span><span class="w"> </span>OK
</span><span id="__span-31-3"><a id="__codelineno-31-3" name="__codelineno-31-3" href="#__codelineno-31-3"></a>content-length:<span class="w"> </span><span class="m">25</span>
</span><span id="__span-31-4"><a id="__codelineno-31-4" name="__codelineno-31-4" href="#__codelineno-31-4"></a>content-type:<span class="w"> </span>application/json
</span><span id="__span-31-5"><a id="__codelineno-31-5" name="__codelineno-31-5" href="#__codelineno-31-5"></a>date:<span class="w"> </span>Thu,<span class="w"> </span><span class="m">11</span><span class="w"> </span>Jan<span class="w"> </span><span class="m">2024</span><span class="w"> </span><span class="m">11</span>:46:32<span class="w"> </span>GMT
</span><span id="__span-31-6"><a id="__codelineno-31-6" name="__codelineno-31-6" href="#__codelineno-31-6"></a>server:<span class="w"> </span>uvicorn
</span><span id="__span-31-7"><a id="__codelineno-31-7" name="__codelineno-31-7" href="#__codelineno-31-7"></a>
</span><span id="__span-31-8"><a id="__codelineno-31-8" name="__codelineno-31-8" href="#__codelineno-31-8"></a><span class="o">{</span>
</span><span id="__span-31-9"><a id="__codelineno-31-9" name="__codelineno-31-9" href="#__codelineno-31-9"></a><span class="w">    </span><span class="s2">"message"</span>:<span class="w"> </span><span class="s2">"Olá Mundo!"</span>
</span><span id="__span-31-10"><a id="__codelineno-31-10" name="__codelineno-31-10" href="#__codelineno-31-10"></a><span class="o">}</span>
</span></code></pre></div>
<p>Existem até mesmo aplicações gráficas de código aberto pensadas para serem clientes HTTP para APIs. Como o <a href="https://hoppscotch.io/" target="_blank">hoppscotch</a>:</p>
<p><a class="glightbox" href="../assets/01/cliente_grafico_para_apis_hoppscotch.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="Captura de tela do hoppscotch" class="center shadow" src="../assets/01/cliente_grafico_para_apis_hoppscotch.png"></a></p>
<p>Ou como o <a href="https://www.usebruno.com/" target="_blank">Bruno</a>:
<a class="glightbox" href="../assets/01/cliente_grafico_para_apis_bruno.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="Captura de tela do bruno" class="center shadow" src="../assets/01/cliente_grafico_para_apis_bruno.png"></a></p>
</details>
<h3 id="uvicorn">Uvicorn</h3>
<p>O FastAPI é ótimo para criar APIs, mas não pode disponibilizá-las na rede sozinho. Embora o FastAPI tenha uma aplicação de terminal que facilita a execução. Para podermos acessar essas APIs por um navegador ou de outras aplicações clientes, é necessário um servidor. É aí que o Uvicorn entra em cena. Ele atua como esse servidor, disponibilizando a API do FastAPI em rede. Isso permite que a API seja acessada de outros dispositivos ou programas.</p>
<p>Como notamos na resposta do comando <code>fastapi dev fast_zero/app.py</code>:</p>
<div class="language-bash highlight"><span class="filename">Fim da resposta de `fastapi dev fast_zero/app.py`</span><pre><span></span><code><span id="__span-32-1"><a id="__codelineno-32-1" name="__codelineno-32-1" href="#__codelineno-32-1"></a>INFO:<span class="w">     </span>Uvicorn<span class="w"> </span>running<span class="w"> </span>on<span class="w"> </span>http://127.0.0.1:8000<span class="w"> </span><span class="o">(</span>Press<span class="w"> </span>CTRL+C<span class="w"> </span>to<span class="w"> </span>quit<span class="o">)</span>
</span><span id="__span-32-2"><a id="__codelineno-32-2" name="__codelineno-32-2" href="#__codelineno-32-2"></a>INFO:<span class="w">     </span>Started<span class="w"> </span>reloader<span class="w"> </span>process<span class="w"> </span><span class="o">[</span><span class="m">893203</span><span class="o">]</span><span class="w"> </span>using<span class="w"> </span>WatchFiles
</span><span id="__span-32-3"><a id="__codelineno-32-3" name="__codelineno-32-3" href="#__codelineno-32-3"></a>INFO:<span class="w">     </span>Started<span class="w"> </span>server<span class="w"> </span>process<span class="w"> </span><span class="o">[</span><span class="m">893207</span><span class="o">]</span>
</span><span id="__span-32-4"><a id="__codelineno-32-4" name="__codelineno-32-4" href="#__codelineno-32-4"></a>INFO:<span class="w">     </span>Waiting<span class="w"> </span><span class="k">for</span><span class="w"> </span>application<span class="w"> </span>startup.
</span><span id="__span-32-5"><a id="__codelineno-32-5" name="__codelineno-32-5" href="#__codelineno-32-5"></a>INFO:<span class="w">     </span>Application<span class="w"> </span>startup<span class="w"> </span>complete.
</span></code></pre></div>
<p>Sempre que usarmos o fastapi para inicializar a aplicação no shell, ele faz uma chamada interna para inicializar o uvicorn. Por esse motivo, ele aparece nas respostas HTTP e também na execução do comando.</p>
<details class="tip">
<summary>Você poderia chamar a aplicação diretamente pelo Uvicorn também</summary>
<p></p><div class="language-shell highlight"><span class="filename">$ Execução no terminal!</span><pre><span></span><code><span id="__span-33-1"><a id="__codelineno-33-1" name="__codelineno-33-1" href="#__codelineno-33-1"></a>uvicorn<span class="w"> </span>fast_zero.app:app
</span></code></pre></div>
Esse comando diz ao uvicorn o seguinte: na pasta fast_zero existe um arquivo chamado app. Dentro desse arquivo, temos uma aplicação para ser servida com o nome de app. O comando é composto por uvicorn pasta.arquivo:variável.
<p>A resposta do comando no terminal deve ser parecida com essa:</p>
<div class="language-shell highlight"><span class="filename">Resultado do comando</span><pre><span></span><code><span id="__span-34-1"><a id="__codelineno-34-1" name="__codelineno-34-1" href="#__codelineno-34-1"></a>INFO:<span class="w">     </span>Started<span class="w"> </span>server<span class="w"> </span>process<span class="w"> </span><span class="o">[</span><span class="m">127946</span><span class="o">]</span>
</span><span id="__span-34-2"><a id="__codelineno-34-2" name="__codelineno-34-2" href="#__codelineno-34-2"></a>INFO:<span class="w">     </span>Waiting<span class="w"> </span><span class="k">for</span><span class="w"> </span>application<span class="w"> </span>startup.
</span><span id="__span-34-3"><a id="__codelineno-34-3" name="__codelineno-34-3" href="#__codelineno-34-3"></a>INFO:<span class="w">     </span>Application<span class="w"> </span>startup<span class="w"> </span>complete.
</span><span id="__span-34-4"><a id="__codelineno-34-4" name="__codelineno-34-4" href="#__codelineno-34-4"></a>INFO:<span class="w">     </span>Uvicorn<span class="w"> </span>running<span class="w"> </span>on<span class="w"> </span>http://127.0.0.1:8000<span class="w"> </span><span class="o">(</span>Press<span class="w"> </span>CTRL+C<span class="w"> </span>to<span class="w"> </span>quit<span class="o">)</span>
</span></code></pre></div>
</details>
<h2 id="instalando-as-ferramentas-de-desenvolvimento">Instalando as ferramentas de desenvolvimento</h2>
<p>As escolhas de ferramentas de desenvolvimento, de forma geral, são escolhas bem particulares. Não costumam ser consensuais nem mesmo em times de desenvolvimento. Dito isso, selecionei algumas ferramentas que gosto de usar e alinhadas com a utilidade que elas apresentam no desenvolvimento do projeto.</p>
<p>As ferramentas escolhidas são:</p>
<ul>
<li><a href="https://github.com/taskipy/taskipy" target="_blank">taskipy</a>: ferramenta usada para criação de comandos. Como executar a aplicação, rodar os testes, etc.</li>
<li><a href="https://docs.pytest.org/" target="_blank">pytest</a>: ferramenta para escrever e executar testes</li>
<li><a href="https://docs.astral.sh/ruff/" target="_blank">ruff</a>: Uma ferramenta que tem duas funções no nosso código:<ol>
<li>Um analisador estático de código (um <a href="https://pt.wikipedia.org/wiki/Linter_(computa%C3%A7%C3%A3o)" target="_blank">linter</a>), para dizer se não estamos infringindo alguma <a href="https://docs.astral.sh/ruff/rules/" target="_blank">boa prática de programação</a>;</li>
<li>Um formatador de código. Para seguirmos um estilo único de código. Vamos nos basear na <a href="https://peps.python.org/pep-0008/" target="_blank">PEP-8</a>.</li>
</ol>
</li>
</ul>
<p>Para instalar essas ferramentas que usaremos em desenvolvimento, podemos usar um grupo (<code>--group dev</code>) do poetry focado nelas, para não serem instaladas quando nossa aplicação estiver em produção:</p>
<div class="language-shell highlight"><span class="filename">$ Execução no terminal!</span><pre><span></span><code><span id="__span-35-1"><a id="__codelineno-35-1" name="__codelineno-35-1" href="#__codelineno-35-1"></a>poetry<span class="w"> </span>add<span class="w"> </span>--group<span class="w"> </span>dev<span class="w"> </span>pytest<span class="w"> </span>pytest-cov<span class="w"> </span>taskipy<span class="w"> </span>ruff
</span></code></pre></div>
<h2 id="configurando-as-ferramentas-de-desenvolvimento">Configurando as ferramentas de desenvolvimento</h2>
<p>Após a instalação das ferramentas de desenvolvimento, precisamos definir as configurações de cada uma individualmente no arquivo <code>pyproject.toml</code>.</p>
<h3 id="ruff">Ruff</h3>
<p>O <a href="https://docs.astral.sh/ruff/" target="_blank">Ruff</a> é uma ferramenta moderna em python, escrita em rust, compatível<sup id="fnref:3"><a class="footnote-ref" href="#fn:3">3</a></sup> com os projetos de análise estática escritos e mantidos originalmente pela comunidade no projeto <a href="https://github.com/PyCQA/" target="_blank">PYCQA</a><sup id="fnref:4"><a class="footnote-ref" href="#fn:4">4</a></sup> e tem duas funções principais:</p>
<ol>
<li>Analisar o código de forma estática (Linter): Efetuar a verificação se estamos programando de acordo com boas práticas do python.</li>
<li>Formatar o código (Formatter): Efetuar a verificação do código para padronizar um estilo de código pré-definido.</li>
</ol>
<p>Para configurar o ruff montamos a configuração em 3 <a href="https://toml.io/pt/v1.0.0#tabela" target="_blank">tabelas</a> distintas no arquivo <code>pyproject.toml</code>. Uma para as configurações globais, uma para o linter e uma para o formatador.</p>
<p><strong>Configuração global</strong></p>
<p>Na configuração global do Ruff queremos alterar somente duas coisas. O comprimento de linha para 79 caracteres (conforme sugerido na <a href="https://peps.python.org/pep-0008/" target="_blank">PEP-8</a>) e, em seguida, informaremos que o diretório de migrações de banco de dados será ignorado na checagem e na formatação:</p>
<div class="language-toml highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">pyproject.toml</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-36-21">21</a></span>
<span class="normal"><a href="#__codelineno-36-22">22</a></span>
<span class="normal"><a href="#__codelineno-36-23">23</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-36-21"><a id="__codelineno-36-21" name="__codelineno-36-21"></a><span class="k">[tool.ruff]</span>
</span><span id="__span-36-22"><a id="__codelineno-36-22" name="__codelineno-36-22"></a><span class="n">line-length</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">79</span>
</span><span id="__span-36-23"><a id="__codelineno-36-23" name="__codelineno-36-23"></a><span class="n">extend-exclude</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="s1">'migrations'</span><span class="p">]</span>
</span></code></pre></div></td></tr></table></div>
<details class="example" open="open">
<summary>Nota sobre "migrations"</summary>
<p>Nessa fase de configuração, excluiremos a pasta <code>migrations</code>, isso pode não fazer muito sentido nesse momento. Contudo, quando iniciarmos o trabalho com o banco de dados, a ferramenta <code>Alembic</code> faz geração de código automático. Por serem códigos gerados automaticamente, não queremos alterar a configuração feita por ela.</p>
</details>
<p><strong>Linter</strong></p>
<p>Durante a análise estática do código, queremos buscar por coisas específicas. No Ruff, precisamos dizer exatamente o que ele deve analisar. Isso é feito por códigos. Usaremos estes:</p>
<ul>
<li><code>I</code> (<a href="https://pycqa.github.io/isort/" target="_blank">Isort</a>): Checagem de ordenação de imports em ordem alfabética</li>
<li><code>F</code> (<a href="https://github.com/PyCQA/pyflakes" target="_blank">Pyflakes</a>): Procura por alguns erros em relação a boas práticas de código</li>
<li><code>E</code> (Erros <a href="https://pycodestyle.pycqa.org/en/latest/" target="_blank">pycodestyle</a>): Erros de estilo de código</li>
<li><code>W</code> (Avisos <a href="https://pycodestyle.pycqa.org/en/latest/" target="_blank">pycodestyle</a>): Avisos de coisas não recomendadas no estilo de código</li>
<li><code>PL</code> (<a href="https://pylint.pycqa.org/en/latest/index.html" target="_blank">Pylint</a>): Como o <code>F</code>, também procura por erros em relação a boas práticas de código</li>
<li><code>PT</code> (<a href="https://pypi.org/project/flake8-pytest-style/" target="_blank">flake8-pytest</a>): Checagem de boas práticas do Pytest</li>
</ul>
<div class="language-toml highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">pyproject.toml</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-37-25">25</a></span>
<span class="normal"><a href="#__codelineno-37-26">26</a></span>
<span class="normal"><a href="#__codelineno-37-27">27</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-37-25"><a id="__codelineno-37-25" name="__codelineno-37-25"></a><span class="k">[tool.ruff.lint]</span>
</span><span id="__span-37-26"><a id="__codelineno-37-26" name="__codelineno-37-26"></a><span class="n">preview</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">true</span>
</span><span id="__span-37-27"><a id="__codelineno-37-27" name="__codelineno-37-27"></a><span class="n">select</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="s1">'I'</span><span class="p">,</span><span class="w"> </span><span class="s1">'F'</span><span class="p">,</span><span class="w"> </span><span class="s1">'E'</span><span class="p">,</span><span class="w"> </span><span class="s1">'W'</span><span class="p">,</span><span class="w"> </span><span class="s1">'PL'</span><span class="p">,</span><span class="w"> </span><span class="s1">'PT'</span><span class="p">]</span>
</span></code></pre></div></td></tr></table></div>
<blockquote>
<p>Para mais informações sobre a configuração e sobre os códigos do ruff e dos projetos do PyCQA, você pode checar a <a href="https://docs.astral.sh/ruff/rules" target="_blank">documentação do ruff</a> ou as documentações originais dos projetos <a href="https://github.com/PyCQA" target="_blank">PyQCA</a>.</p>
</blockquote>
<p><strong>Formatter</strong></p>
<p>A formatação do Ruff praticamente não precisa ser alterada. Pois ele vai seguir as boas práticas e usar a configuração global de <code>79</code> caracteres por linha. A única alteração que farei é o uso de aspas simples <code>'</code> no lugar de aspas duplas <code>"</code>:</p>
<div class="language-toml highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">pyproject.toml</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-38-29">29</a></span>
<span class="normal"><a href="#__codelineno-38-30">30</a></span>
<span class="normal"><a href="#__codelineno-38-31">31</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-38-29"><a id="__codelineno-38-29" name="__codelineno-38-29"></a><span class="k">[tool.ruff.format]</span>
</span><span id="__span-38-30"><a id="__codelineno-38-30" name="__codelineno-38-30"></a><span class="n">preview</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">true</span>
</span><span id="__span-38-31"><a id="__codelineno-38-31" name="__codelineno-38-31"></a><span class="n">quote-style</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'single'</span>
</span></code></pre></div></td></tr></table></div>
<blockquote>
<p>Lembrando que a opção de usar aspas simples é totalmente pessoal, você pode usar aspas duplas se quiser.</p>
</blockquote>
<h3 id="pytest">pytest</h3>
<p>O <a href="https://docs.pytest.org/" target="_blank">Pytest</a> é uma framework de testes, que usaremos para escrever e executar nossos testes. O configuraremos para reconhecer o caminho base para execução dos testes na raiz do projeto <code>.</code>:</p>
<div class="language-toml highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">pyproject.toml</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-39-33">33</a></span>
<span class="normal"><a href="#__codelineno-39-34">34</a></span>
<span class="normal"><a href="#__codelineno-39-35">35</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-39-33"><a id="__codelineno-39-33" name="__codelineno-39-33"></a><span class="k">[tool.pytest.ini_options]</span>
</span><span id="__span-39-34"><a id="__codelineno-39-34" name="__codelineno-39-34"></a><span class="n">pythonpath</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"."</span>
</span><span id="__span-39-35"><a id="__codelineno-39-35" name="__codelineno-39-35"></a><span class="n">addopts</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'-p no:warnings'</span>
</span></code></pre></div></td></tr></table></div>
<p>Na segunda linha, dizemos para o pytest adicionar a opção <code>no:warnings</code>. Para ter uma visualização mais limpa dos testes, caso alguma biblioteca exiba uma mensagem de warning, isso será suprimido pelo pytest.</p>
<h3 id="taskipy">Taskipy</h3>
<p>A ideia do <a href="https://github.com/taskipy/taskipy" target="_blank">Taskipy</a> é ser um executor de tarefas (<em>task runner</em>) complementar em nossa aplicação. No lugar de ter que lembrar comandos como o do fastapi, que vimos na execução da aplicação, que tal substituir ele simplesmente por <code>task run</code>?</p>
<p>Isso funcionaria para qualquer comando complicado em nossa aplicação. Simplificando as chamadas e também para não termos que lembrar de como executar todos os comandos de cabeça.</p>
<p>Alguns comandos que criaremos agora no início:</p>
<div class="language-toml highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">pyproject.toml</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-40-37">37</a></span>
<span class="normal"><a href="#__codelineno-40-38">38</a></span>
<span class="normal"><a href="#__codelineno-40-39">39</a></span>
<span class="normal"><a href="#__codelineno-40-40">40</a></span>
<span class="normal"><a href="#__codelineno-40-41">41</a></span>
<span class="normal"><a href="#__codelineno-40-42">42</a></span>
<span class="normal"><a href="#__codelineno-40-43">43</a></span>
<span class="normal"><a href="#__codelineno-40-44">44</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-40-37"><a id="__codelineno-40-37" name="__codelineno-40-37"></a><span class="k">[tool.taskipy.tasks]</span>
</span><span id="__span-40-38"><a id="__codelineno-40-38" name="__codelineno-40-38"></a><span class="n">lint</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'ruff check'</span>
</span><span id="__span-40-39"><a id="__codelineno-40-39" name="__codelineno-40-39"></a><span class="n">pre_format</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'ruff check --fix'</span>
</span><span id="__span-40-40"><a id="__codelineno-40-40" name="__codelineno-40-40"></a><span class="n">format</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'ruff format'</span>
</span><span id="__span-40-41"><a id="__codelineno-40-41" name="__codelineno-40-41"></a><span class="n">run</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'fastapi dev fast_zero/app.py'</span>
</span><span id="__span-40-42"><a id="__codelineno-40-42" name="__codelineno-40-42"></a><span class="n">pre_test</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'task lint'</span>
</span><span id="__span-40-43"><a id="__codelineno-40-43" name="__codelineno-40-43"></a><span class="n">test</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'pytest -s -x --cov=fast_zero -vv'</span>
</span><span id="__span-40-44"><a id="__codelineno-40-44" name="__codelineno-40-44"></a><span class="n">post_test</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'coverage html'</span>
</span></code></pre></div></td></tr></table></div>
<p>Os comandos definidos fazem o seguinte:</p>
<ul>
<li><code>lint</code>: Faz a checagem de boas práticas do código python</li>
<li><code>pre_format</code>: Faz algumas correções de boas práticas automaticamente</li>
<li><code>format</code>: Executa a formatação do código em relação às convenções de estilo de código</li>
<li><code>run</code>: executa o servidor de desenvolvimento do FastAPI</li>
<li><code>pre_test</code>: executa a camada de lint antes de executar os testes</li>
<li><code>test</code>: executa os testes com pytest de forma verbosa (-vv) e adiciona nosso código como base de cobertura</li>
<li><code>post_test</code>: gera um report de cobertura após os testes</li>
</ul>
<p>Para executar um comando, é bem mais simples, precisando somente passar a palavra <code>task &lt;comando&gt;</code>.</p>
<h4 id="comandos-com-prefixo-pre-e-pos">Comandos com prefixo <code>pre</code> e <code>pos</code></h4>
<p>Todos os comandos do taskipy que apresentam prefixos como <code>pre_comando</code> ou <code>post_comando</code> não precisam ser executados diretamente. Por exemplo, se executarmos o comando <code>task test</code> ele executará o comando <code>pre_test</code> e caso tudo ocorra bem, sem erros, ele executará o <code>test</code>, caso não aconteçam erros, o <code>post_test</code> será executado.</p>
<p>Nada impede que os comandos com prefixos sejam executados diretamente, mas eles são montados para serem executados em cadeia.</p>
<hr>
<details class="warning">
<summary>Caso precise ver o arquivo de configuração por completo</summary>
<p>O meu está exatamente assim:</p>
<div class="language-toml highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">pyproject.toml</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-41-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-41-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-41-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-41-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-41-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-41-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-41-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-41-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-41-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-41-10">10</a></span>
<span class="normal"><a href="#__codelineno-41-11">11</a></span>
<span class="normal"><a href="#__codelineno-41-12">12</a></span>
<span class="normal"><a href="#__codelineno-41-13">13</a></span>
<span class="normal"><a href="#__codelineno-41-14">14</a></span>
<span class="normal"><a href="#__codelineno-41-15">15</a></span>
<span class="normal"><a href="#__codelineno-41-16">16</a></span>
<span class="normal"><a href="#__codelineno-41-17">17</a></span>
<span class="normal"><a href="#__codelineno-41-18">18</a></span>
<span class="normal"><a href="#__codelineno-41-19">19</a></span>
<span class="normal"><a href="#__codelineno-41-20">20</a></span>
<span class="normal"><a href="#__codelineno-41-21">21</a></span>
<span class="normal"><a href="#__codelineno-41-22">22</a></span>
<span class="normal"><a href="#__codelineno-41-23">23</a></span>
<span class="normal"><a href="#__codelineno-41-24">24</a></span>
<span class="normal"><a href="#__codelineno-41-25">25</a></span>
<span class="normal"><a href="#__codelineno-41-26">26</a></span>
<span class="normal"><a href="#__codelineno-41-27">27</a></span>
<span class="normal"><a href="#__codelineno-41-28">28</a></span>
<span class="normal"><a href="#__codelineno-41-29">29</a></span>
<span class="normal"><a href="#__codelineno-41-30">30</a></span>
<span class="normal"><a href="#__codelineno-41-31">31</a></span>
<span class="normal"><a href="#__codelineno-41-32">32</a></span>
<span class="normal"><a href="#__codelineno-41-33">33</a></span>
<span class="normal"><a href="#__codelineno-41-34">34</a></span>
<span class="normal"><a href="#__codelineno-41-35">35</a></span>
<span class="normal"><a href="#__codelineno-41-36">36</a></span>
<span class="normal"><a href="#__codelineno-41-37">37</a></span>
<span class="normal"><a href="#__codelineno-41-38">38</a></span>
<span class="normal"><a href="#__codelineno-41-39">39</a></span>
<span class="normal"><a href="#__codelineno-41-40">40</a></span>
<span class="normal"><a href="#__codelineno-41-41">41</a></span>
<span class="normal"><a href="#__codelineno-41-42">42</a></span>
<span class="normal"><a href="#__codelineno-41-43">43</a></span>
<span class="normal"><a href="#__codelineno-41-44">44</a></span>
<span class="normal"><a href="#__codelineno-41-45">45</a></span>
<span class="normal"><a href="#__codelineno-41-46">46</a></span>
<span class="normal"><a href="#__codelineno-41-47">47</a></span>
<span class="normal"><a href="#__codelineno-41-48">48</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-41-1"><a id="__codelineno-41-1" name="__codelineno-41-1"></a><span class="k">[project]</span>
</span><span id="__span-41-2"><a id="__codelineno-41-2" name="__codelineno-41-2"></a><span class="n">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"fast_zero"</span>
</span><span id="__span-41-3"><a id="__codelineno-41-3" name="__codelineno-41-3"></a><span class="n">version</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"0.1.0"</span>
</span><span id="__span-41-4"><a id="__codelineno-41-4" name="__codelineno-41-4"></a><span class="n">description</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">""</span>
</span><span id="__span-41-5"><a id="__codelineno-41-5" name="__codelineno-41-5"></a><span class="n">authors</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span>
</span><span id="__span-41-6"><a id="__codelineno-41-6" name="__codelineno-41-6"></a><span class="w">    </span><span class="p">{</span><span class="n">name</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s2">"dunossauro"</span><span class="p">,</span><span class="n">email</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s2">"mendesxeduardo@gmail.com"</span><span class="p">}</span>
</span><span id="__span-41-7"><a id="__codelineno-41-7" name="__codelineno-41-7"></a><span class="p">]</span>
</span><span id="__span-41-8"><a id="__codelineno-41-8" name="__codelineno-41-8"></a><span class="n">readme</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"README.md"</span>
</span><span id="__span-41-9"><a id="__codelineno-41-9" name="__codelineno-41-9"></a><span class="n">requires-python</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"&gt;=3.11,&lt;4.0"</span>
</span><span id="__span-41-10"><a id="__codelineno-41-10" name="__codelineno-41-10"></a><span class="n">dependencies</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span>
</span><span id="__span-41-11"><a id="__codelineno-41-11" name="__codelineno-41-11"></a><span class="w">    </span><span class="s2">"fastapi[standard] (&gt;=0.115.6,&lt;0.116.0)"</span>
</span><span id="__span-41-12"><a id="__codelineno-41-12" name="__codelineno-41-12"></a><span class="p">]</span>
</span><span id="__span-41-13"><a id="__codelineno-41-13" name="__codelineno-41-13"></a>
</span><span id="__span-41-14"><a id="__codelineno-41-14" name="__codelineno-41-14"></a><span class="k">[tool.poetry.group.dev.dependencies]</span>
</span><span id="__span-41-15"><a id="__codelineno-41-15" name="__codelineno-41-15"></a><span class="n">pytest</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"^8.3.4"</span>
</span><span id="__span-41-16"><a id="__codelineno-41-16" name="__codelineno-41-16"></a><span class="n">pytest-cov</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"^6.0.0"</span>
</span><span id="__span-41-17"><a id="__codelineno-41-17" name="__codelineno-41-17"></a><span class="n">taskipy</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"^1.14.1"</span>
</span><span id="__span-41-18"><a id="__codelineno-41-18" name="__codelineno-41-18"></a><span class="n">ruff</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"^0.8.6"</span>
</span><span id="__span-41-19"><a id="__codelineno-41-19" name="__codelineno-41-19"></a><span class="n">httpx</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"^0.28.1"</span>
</span><span id="__span-41-20"><a id="__codelineno-41-20" name="__codelineno-41-20"></a>
</span><span id="__span-41-21"><a id="__codelineno-41-21" name="__codelineno-41-21"></a><span class="k">[tool.ruff]</span>
</span><span id="__span-41-22"><a id="__codelineno-41-22" name="__codelineno-41-22"></a><span class="n">line-length</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">79</span>
</span><span id="__span-41-23"><a id="__codelineno-41-23" name="__codelineno-41-23"></a><span class="n">extend-exclude</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="s1">'migrations'</span><span class="p">]</span>
</span><span id="__span-41-24"><a id="__codelineno-41-24" name="__codelineno-41-24"></a>
</span><span id="__span-41-25"><a id="__codelineno-41-25" name="__codelineno-41-25"></a><span class="k">[tool.ruff.lint]</span>
</span><span id="__span-41-26"><a id="__codelineno-41-26" name="__codelineno-41-26"></a><span class="n">preview</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">true</span>
</span><span id="__span-41-27"><a id="__codelineno-41-27" name="__codelineno-41-27"></a><span class="n">select</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="s1">'I'</span><span class="p">,</span><span class="w"> </span><span class="s1">'F'</span><span class="p">,</span><span class="w"> </span><span class="s1">'E'</span><span class="p">,</span><span class="w"> </span><span class="s1">'W'</span><span class="p">,</span><span class="w"> </span><span class="s1">'PL'</span><span class="p">,</span><span class="w"> </span><span class="s1">'PT'</span><span class="p">]</span>
</span><span id="__span-41-28"><a id="__codelineno-41-28" name="__codelineno-41-28"></a>
</span><span id="__span-41-29"><a id="__codelineno-41-29" name="__codelineno-41-29"></a><span class="k">[tool.ruff.format]</span>
</span><span id="__span-41-30"><a id="__codelineno-41-30" name="__codelineno-41-30"></a><span class="n">preview</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">true</span>
</span><span id="__span-41-31"><a id="__codelineno-41-31" name="__codelineno-41-31"></a><span class="n">quote-style</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'single'</span>
</span><span id="__span-41-32"><a id="__codelineno-41-32" name="__codelineno-41-32"></a>
</span><span id="__span-41-33"><a id="__codelineno-41-33" name="__codelineno-41-33"></a><span class="k">[tool.pytest.ini_options]</span>
</span><span id="__span-41-34"><a id="__codelineno-41-34" name="__codelineno-41-34"></a><span class="n">pythonpath</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"."</span>
</span><span id="__span-41-35"><a id="__codelineno-41-35" name="__codelineno-41-35"></a><span class="n">addopts</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'-p no:warnings'</span>
</span><span id="__span-41-36"><a id="__codelineno-41-36" name="__codelineno-41-36"></a>
</span><span id="__span-41-37"><a id="__codelineno-41-37" name="__codelineno-41-37"></a><span class="k">[tool.taskipy.tasks]</span>
</span><span id="__span-41-38"><a id="__codelineno-41-38" name="__codelineno-41-38"></a><span class="n">lint</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'ruff check'</span>
</span><span id="__span-41-39"><a id="__codelineno-41-39" name="__codelineno-41-39"></a><span class="n">pre_format</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'ruff check --fix'</span>
</span><span id="__span-41-40"><a id="__codelineno-41-40" name="__codelineno-41-40"></a><span class="n">format</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'ruff format'</span>
</span><span id="__span-41-41"><a id="__codelineno-41-41" name="__codelineno-41-41"></a><span class="n">run</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'fastapi dev fast_zero/app.py'</span>
</span><span id="__span-41-42"><a id="__codelineno-41-42" name="__codelineno-41-42"></a><span class="n">pre_test</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'task lint'</span>
</span><span id="__span-41-43"><a id="__codelineno-41-43" name="__codelineno-41-43"></a><span class="n">test</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'pytest -s -x --cov=fast_zero -vv'</span>
</span><span id="__span-41-44"><a id="__codelineno-41-44" name="__codelineno-41-44"></a><span class="n">post_test</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'coverage html'</span>
</span><span id="__span-41-45"><a id="__codelineno-41-45" name="__codelineno-41-45"></a>
</span><span id="__span-41-46"><a id="__codelineno-41-46" name="__codelineno-41-46"></a><span class="k">[build-system]</span>
</span><span id="__span-41-47"><a id="__codelineno-41-47" name="__codelineno-41-47"></a><span class="n">requires</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="s2">"poetry-core&gt;=2.0.0,&lt;3.0.0"</span><span class="p">]</span>
</span><span id="__span-41-48"><a id="__codelineno-41-48" name="__codelineno-41-48"></a><span class="n">build-backend</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"poetry.core.masonry.api"</span>
</span></code></pre></div></td></tr></table></div>
<p>Um ponto importante é que as versões dos pacotes podem variar dependendo da data em que você fizer a instalação dos pacotes. Esse arquivo é somente um exemplo.</p>
</details>
<h3 id="os-efeitos-dessas-configuracoes-de-desenvolvimento">Os efeitos dessas configurações de desenvolvimento</h3>
<p>Caso você tenha copiado o código que usamos para definir <code>fast_zero/app.py</code>, pode testar os comandos que criamos para o <code>taskipy</code>:</p>
<div class="language-shell highlight"><span class="filename">$ Execução no terminal!</span><pre><span></span><code><span id="__span-42-1"><a id="__codelineno-42-1" name="__codelineno-42-1" href="#__codelineno-42-1"></a>task<span class="w"> </span>lint
</span></code></pre></div>
<p>Dessa forma, veremos que cometemos algumas infrações na formatação da PEP-8. O ruff nos informará que deveríamos ter adicionado duas linhas antes de uma definição de função:</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-43-1"><a id="__codelineno-43-1" name="__codelineno-43-1" href="#__codelineno-43-1"></a><span class="n">fast_zero</span><span class="o">/</span><span class="n">app</span><span class="o">.</span><span class="n">py</span><span class="p">:</span><span class="mi">5</span><span class="p">:</span><span class="mi">1</span><span class="p">:</span> <span class="n">E302</span> <span class="p">[</span><span class="o">*</span><span class="p">]</span> <span class="n">Expected</span> <span class="mi">2</span> <span class="n">blank</span> <span class="n">lines</span><span class="p">,</span> <span class="n">found</span> <span class="mi">1</span>
</span><span id="__span-43-2"><a id="__codelineno-43-2" name="__codelineno-43-2" href="#__codelineno-43-2"></a>  <span class="o">|</span>
</span><span id="__span-43-3"><a id="__codelineno-43-3" name="__codelineno-43-3" href="#__codelineno-43-3"></a><span class="mi">3</span> <span class="o">|</span> <span class="n">app</span> <span class="o">=</span> <span class="n">FastAPI</span><span class="p">()</span>
</span><span id="__span-43-4"><a id="__codelineno-43-4" name="__codelineno-43-4" href="#__codelineno-43-4"></a><span class="mi">4</span> <span class="o">|</span> 
</span><span id="__span-43-5"><a id="__codelineno-43-5" name="__codelineno-43-5" href="#__codelineno-43-5"></a><span class="mi">5</span> <span class="o">|</span> <span class="nd">@app</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">'/'</span><span class="p">)</span>
</span><span id="__span-43-6"><a id="__codelineno-43-6" name="__codelineno-43-6" href="#__codelineno-43-6"></a>  <span class="o">|</span> <span class="o">^</span> <span class="n">E302</span>
</span><span id="__span-43-7"><a id="__codelineno-43-7" name="__codelineno-43-7" href="#__codelineno-43-7"></a><span class="mi">6</span> <span class="o">|</span> <span class="k">def</span><span class="w"> </span><span class="nf">read_root</span><span class="p">():</span>
</span><span id="__span-43-8"><a id="__codelineno-43-8" name="__codelineno-43-8" href="#__codelineno-43-8"></a><span class="mi">7</span> <span class="o">|</span>     <span class="k">return</span> <span class="p">{</span><span class="s1">'message'</span><span class="p">:</span> <span class="s1">'Olá Mundo!'</span><span class="p">}</span>
</span><span id="__span-43-9"><a id="__codelineno-43-9" name="__codelineno-43-9" href="#__codelineno-43-9"></a>  <span class="o">|</span>
</span><span id="__span-43-10"><a id="__codelineno-43-10" name="__codelineno-43-10" href="#__codelineno-43-10"></a>  <span class="o">=</span> <span class="n">help</span><span class="p">:</span> <span class="n">Add</span> <span class="n">missing</span> <span class="n">blank</span> <span class="n">line</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
</span><span id="__span-43-11"><a id="__codelineno-43-11" name="__codelineno-43-11" href="#__codelineno-43-11"></a>
</span><span id="__span-43-12"><a id="__codelineno-43-12" name="__codelineno-43-12" href="#__codelineno-43-12"></a><span class="n">Found</span> <span class="mi">1</span> <span class="n">error</span><span class="o">.</span>
</span><span id="__span-43-13"><a id="__codelineno-43-13" name="__codelineno-43-13" href="#__codelineno-43-13"></a><span class="p">[</span><span class="o">*</span><span class="p">]</span> <span class="mi">1</span> <span class="n">fixable</span> <span class="k">with</span> <span class="n">the</span> <span class="err">`</span><span class="o">--</span><span class="n">fix</span><span class="err">`</span> <span class="n">option</span><span class="o">.</span>
</span></code></pre></div>
<p>Para corrigir isso, podemos usar o nosso comando de formatação de código:</p>
<div class="tabbed-set tabbed-alternate" data-tabs="4:2"><input checked id="__tabbed_4_1" name="__tabbed_4" type="radio"><input id="__tabbed_4_2" name="__tabbed_4" type="radio"><div class="tabbed-labels"><label for="__tabbed_4_1">Comando</label><label for="__tabbed_4_2">Resultado</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="language-shell highlight"><span class="filename">$ Execução no terminal!</span><pre><span></span><code><span id="__span-44-1"><a id="__codelineno-44-1" name="__codelineno-44-1" href="#__codelineno-44-1"></a>task<span class="w"> </span>format
</span><span id="__span-44-2"><a id="__codelineno-44-2" name="__codelineno-44-2" href="#__codelineno-44-2"></a>Found<span class="w"> </span><span class="m">1</span><span class="w"> </span>error<span class="w"> </span><span class="o">(</span><span class="m">1</span><span class="w"> </span>fixed,<span class="w"> </span><span class="m">0</span><span class="w"> </span>remaining<span class="o">)</span>.
</span><span id="__span-44-3"><a id="__codelineno-44-3" name="__codelineno-44-3" href="#__codelineno-44-3"></a><span class="m">3</span><span class="w"> </span>files<span class="w"> </span>left<span class="w"> </span>unchanged
</span></code></pre></div>
</div>
<div class="tabbed-block">
<div class="language-py highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">fast_zero/app.py</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-45-1">1</a></span>
<span class="normal"><a href="#__codelineno-45-2">2</a></span>
<span class="normal"><a href="#__codelineno-45-3">3</a></span>
<span class="normal"><a href="#__codelineno-45-4">4</a></span>
<span class="normal"><a href="#__codelineno-45-5">5</a></span>
<span class="normal"><a href="#__codelineno-45-6">6</a></span>
<span class="normal"><a href="#__codelineno-45-7">7</a></span>
<span class="normal"><a href="#__codelineno-45-8">8</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-45-1"><a id="__codelineno-45-1" name="__codelineno-45-1"></a><span class="kn">from</span><span class="w"> </span><span class="nn">fastapi</span><span class="w"> </span><span class="kn">import</span> <span class="n">FastAPI</span>
</span><span id="__span-45-2"><a id="__codelineno-45-2" name="__codelineno-45-2"></a>
</span><span id="__span-45-3"><a id="__codelineno-45-3" name="__codelineno-45-3"></a><span class="n">app</span> <span class="o">=</span> <span class="n">FastAPI</span><span class="p">()</span>
</span><span id="__span-45-4"><a id="__codelineno-45-4" name="__codelineno-45-4"></a>
</span><span id="__span-45-5"><a id="__codelineno-45-5" name="__codelineno-45-5"></a><span class="hll">
</span></span><span id="__span-45-6"><a id="__codelineno-45-6" name="__codelineno-45-6"></a><span class="nd">@app</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">'/'</span><span class="p">)</span>
</span><span id="__span-45-7"><a id="__codelineno-45-7" name="__codelineno-45-7"></a><span class="k">def</span><span class="w"> </span><span class="nf">read_root</span><span class="p">():</span>
</span><span id="__span-45-8"><a id="__codelineno-45-8" name="__codelineno-45-8"></a>    <span class="k">return</span> <span class="p">{</span><span class="s1">'message'</span><span class="p">:</span> <span class="s1">'Olá Mundo!'</span><span class="p">}</span>
</span></code></pre></div></td></tr></table></div>
</div>
</div>
</div>
<h2 id="introducao-ao-pytest-testando-o-hello-world">Introdução ao Pytest: Testando o "Hello, World!"</h2>
<p>Antes de entendermos a dinâmica dos testes, precisamos entender o efeito que eles têm no nosso código. Podemos começar analisando a cobertura (o quanto do nosso código está sendo efetivamente testado). Vamos executar os testes:</p>
<div class="language-shell highlight"><span class="filename">$ Execução no terminal!</span><pre><span></span><code><span id="__span-46-1"><a id="__codelineno-46-1" name="__codelineno-46-1" href="#__codelineno-46-1"></a>task<span class="w"> </span><span class="nb">test</span>
</span></code></pre></div>
<p>Teremos uma resposta como essa:</p>
<div class="language-shell highlight"><span class="filename">$ Execução no terminal!</span><pre><span></span><code><span id="__span-47-1"><a id="__codelineno-47-1" name="__codelineno-47-1" href="#__codelineno-47-1"></a><span class="o">===========================</span><span class="w"> </span><span class="nb">test</span><span class="w"> </span>session<span class="w"> </span><span class="nv">starts</span><span class="w"> </span><span class="o">===========================</span>
</span><span id="__span-47-2"><a id="__codelineno-47-2" name="__codelineno-47-2" href="#__codelineno-47-2"></a>platform<span class="w"> </span>linux<span class="w"> </span>--<span class="w"> </span>Python<span class="w"> </span><span class="m">3</span>.11.7,<span class="w"> </span>pytest-7.4.4,<span class="w"> </span>pluggy-1.3.0
</span><span id="__span-47-3"><a id="__codelineno-47-3" name="__codelineno-47-3" href="#__codelineno-47-3"></a>cachedir:<span class="w"> </span>.pytest_cache
</span><span id="__span-47-4"><a id="__codelineno-47-4" name="__codelineno-47-4" href="#__codelineno-47-4"></a>rootdir:<span class="w"> </span>/home/dunossauro/git/fast_zero
</span><span id="__span-47-5"><a id="__codelineno-47-5" name="__codelineno-47-5" href="#__codelineno-47-5"></a>configfile:<span class="w"> </span>pyproject.toml
</span><span id="__span-47-6"><a id="__codelineno-47-6" name="__codelineno-47-6" href="#__codelineno-47-6"></a>plugins:<span class="w"> </span>cov-4.1.0,<span class="w"> </span>anyio-4.2.0
</span><span id="__span-47-7"><a id="__codelineno-47-7" name="__codelineno-47-7" href="#__codelineno-47-7"></a><span class="hll">collected<span class="w"> </span><span class="m">0</span><span class="w"> </span>items
</span></span><span id="__span-47-8"><a id="__codelineno-47-8" name="__codelineno-47-8" href="#__codelineno-47-8"></a>
</span><span id="__span-47-9"><a id="__codelineno-47-9" name="__codelineno-47-9" href="#__codelineno-47-9"></a>----------<span class="w"> </span>coverage:<span class="w"> </span>platform<span class="w"> </span>linux,<span class="w"> </span>python<span class="w"> </span><span class="m">3</span>.11.7-final-0<span class="w"> </span>-----------
</span><span id="__span-47-10"><a id="__codelineno-47-10" name="__codelineno-47-10" href="#__codelineno-47-10"></a>Name<span class="w">                    </span>Stmts<span class="w">   </span>Miss<span class="w">  </span>Cover
</span><span id="__span-47-11"><a id="__codelineno-47-11" name="__codelineno-47-11" href="#__codelineno-47-11"></a>-------------------------------------------
</span><span id="__span-47-12"><a id="__codelineno-47-12" name="__codelineno-47-12" href="#__codelineno-47-12"></a>fast_zero/__init__.py<span class="w">       </span><span class="m">0</span><span class="w">      </span><span class="m">0</span><span class="w">   </span><span class="m">100</span>%
</span><span id="__span-47-13"><a id="__codelineno-47-13" name="__codelineno-47-13" href="#__codelineno-47-13"></a>fast_zero/app.py<span class="w">            </span><span class="m">5</span><span class="w">      </span><span class="m">5</span><span class="w">     </span><span class="m">0</span>%
</span><span id="__span-47-14"><a id="__codelineno-47-14" name="__codelineno-47-14" href="#__codelineno-47-14"></a>-------------------------------------------
</span><span id="__span-47-15"><a id="__codelineno-47-15" name="__codelineno-47-15" href="#__codelineno-47-15"></a>TOTAL<span class="w">                       </span><span class="m">5</span><span class="w">      </span><span class="m">5</span><span class="w">     </span><span class="m">0</span>%
</span></code></pre></div>
<p>As linhas no terminal são referentes ao pytest, que disse que coletou 0 itens. Nenhum teste foi executado.</p>
<details class="info">
<summary>Caso não tenha muita experiência com Pytest</summary>
<p>Temos uma live de Python explicando os conceitos básicos da biblioteca
<a class="glightbox" href="https://www.youtube.com/embed/MjQCvJmc31A" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><div class="video-container"><iframe src="https://www.youtube.com/embed/MjQCvJmc31A" style="position:relative;width:100%;height:22.172vw" frameborder="0" allowfullscreen alt="type:video"></iframe></div></a></p>
<p><a class="md-button" href="https://youtu.be/MjQCvJmc31A"><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 576 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M549.655 124.083c-6.281-23.65-24.787-42.276-48.284-48.597C458.781 64 288 64 288 64S117.22 64 74.629 75.486c-23.497 6.322-42.003 24.947-48.284 48.597-11.412 42.867-11.412 132.305-11.412 132.305s0 89.438 11.412 132.305c6.281 23.65 24.787 41.5 48.284 47.821C117.22 448 288 448 288 448s170.78 0 213.371-11.486c23.497-6.321 42.003-24.171 48.284-47.821 11.412-42.867 11.412-132.305 11.412-132.305s0-89.438-11.412-132.305m-317.51 213.508V175.185l142.739 81.205z"></path></svg></span> Link direto</a></p>
</details>
<p>A parte importante dessa Mensagem está na tabela gerada pelo <code>coverage</code>. Que diz que temos 5 linhas de código (Stmts) no arquivo <code>fast_zero/app.py</code> e nenhuma delas está coberta pelos nossos testes. Como podemos ver na coluna <code>Miss</code>.</p>
<p>Por não encontrar nenhum teste, o pytest retornou um "erro". Isso significa que nossa tarefa <code>post_test</code> não foi executada. Podemos executá-la manualmente:</p>
<div class="language-shell highlight"><span class="filename">$ Execução no terminal!</span><pre><span></span><code><span id="__span-48-1"><a id="__codelineno-48-1" name="__codelineno-48-1" href="#__codelineno-48-1"></a>task<span class="w"> </span>post_test
</span><span id="__span-48-2"><a id="__codelineno-48-2" name="__codelineno-48-2" href="#__codelineno-48-2"></a>Wrote<span class="w"> </span>HTML<span class="w"> </span>report<span class="w"> </span>to<span class="w"> </span>htmlcov/index.html
</span></code></pre></div>
<p>Isso gera um relatório de cobertura de testes em formato HTML. Podemos abrir esse arquivo em nosso navegador e entender exatamente quais linhas do código não estão sendo testadas.</p>
<p><a class="glightbox" href="../assets/01/navegador_com_pagina_inicial_do_coverage.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="navegador" class="center" src="../assets/01/navegador_com_pagina_inicial_do_coverage.png"></a></p>
<p>Se clicarmos no arquivo <code>fast_zero/app.py</code> podemos ver em vermelho as linhas que não estão sendo testadas:</p>
<p><a class="glightbox" href="../assets/01/navegador_com_pagina_de_cobertura_sem_testes.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="navegador" class="center" src="../assets/01/navegador_com_pagina_de_cobertura_sem_testes.png"></a></p>
<p>Isto significa que precisamos testar todo esse arquivo.</p>
<h3 id="escrevendo-o-teste">Escrevendo o teste</h3>
<p>Agora, escreveremos nosso primeiro teste com Pytest. Mas, antes de escrever o teste, precisamos criar um arquivo específico para eles. Na pasta <code>tests</code>, vamos criar um arquivo chamado <code>test_app.py</code>.</p>
<blockquote>
<p>Por convenção, todos os arquivos de teste do pytest devem iniciar com um prefixo test_<algo>.py</algo></p>
</blockquote>
<p>Para testar o código feito com FastAPI, precisamos de um cliente de teste. A grande vantagem é que o FastAPI já conta com um cliente de testes no módulo <code>fastapi.testclient</code> com o objeto <code>TestClient</code>, que precisa receber nosso app como parâmetro:</p>
<div class="language-python highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">tests/test_app.py</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-49-1">1</a></span>
<span class="normal"><a href="#__codelineno-49-2">2</a></span>
<span class="normal"><a href="#__codelineno-49-3">3</a></span>
<span class="normal"><a href="#__codelineno-49-4">4</a></span>
<span class="normal"><a href="#__codelineno-49-5">5</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-49-1"><a id="__codelineno-49-1" name="__codelineno-49-1"></a><span class="kn">from</span><span class="w"> </span><span class="nn">fastapi.testclient</span><span class="w"> </span><span class="kn">import</span> <span class="n">TestClient</span>  <span class="c1"># (1)!</span>
</span><span id="__span-49-2"><a id="__codelineno-49-2" name="__codelineno-49-2"></a>
</span><span id="__span-49-3"><a id="__codelineno-49-3" name="__codelineno-49-3"></a><span class="kn">from</span><span class="w"> </span><span class="nn">fast_zero.app</span><span class="w"> </span><span class="kn">import</span> <span class="n">app</span>  <span class="c1"># (2)!</span>
</span><span id="__span-49-4"><a id="__codelineno-49-4" name="__codelineno-49-4"></a>
</span><span id="__span-49-5"><a id="__codelineno-49-5" name="__codelineno-49-5"></a><span class="n">client</span> <span class="o">=</span> <span class="n">TestClient</span><span class="p">(</span><span class="n">app</span><span class="p">)</span>  <span class="c1"># (3)!</span>
</span></code></pre></div></td></tr></table></div>
<ol>
<li>Importa do módulo <code>testclient</code> o objeto <code>TestClient</code></li>
<li>Importa o nosso <code>app</code> definido em <code>fast_zero</code></li>
<li>Cria um cliente de testes usando a nossa aplicação como base</li>
</ol>
<p>Só o fato de termos definido um cliente já nos mostra uma cobertura bastante diferente:</p>
<div class="language-shell highlight"><span class="filename">$ Execução no terminal!</span><pre><span></span><code><span id="__span-50-1"><a id="__codelineno-50-1" name="__codelineno-50-1" href="#__codelineno-50-1"></a>task<span class="w"> </span><span class="nb">test</span>
</span><span id="__span-50-2"><a id="__codelineno-50-2" name="__codelineno-50-2" href="#__codelineno-50-2"></a><span class="c1"># parte da mensagem foi omitida</span>
</span><span id="__span-50-3"><a id="__codelineno-50-3" name="__codelineno-50-3" href="#__codelineno-50-3"></a><span class="hll">collected<span class="w"> </span><span class="m">0</span><span class="w"> </span>items
</span></span><span id="__span-50-4"><a id="__codelineno-50-4" name="__codelineno-50-4" href="#__codelineno-50-4"></a>
</span><span id="__span-50-5"><a id="__codelineno-50-5" name="__codelineno-50-5" href="#__codelineno-50-5"></a>----------<span class="w"> </span>coverage:<span class="w"> </span>platform<span class="w"> </span>linux,<span class="w"> </span>python<span class="w"> </span><span class="m">3</span>.11.3-final-0<span class="w"> </span>-----------
</span><span id="__span-50-6"><a id="__codelineno-50-6" name="__codelineno-50-6" href="#__codelineno-50-6"></a>Name<span class="w">                    </span>Stmts<span class="w">   </span>Miss<span class="w">  </span>Cover
</span><span id="__span-50-7"><a id="__codelineno-50-7" name="__codelineno-50-7" href="#__codelineno-50-7"></a>-------------------------------------------
</span><span id="__span-50-8"><a id="__codelineno-50-8" name="__codelineno-50-8" href="#__codelineno-50-8"></a>fast_zero/__init__.py<span class="w">       </span><span class="m">0</span><span class="w">      </span><span class="m">0</span><span class="w">   </span><span class="m">100</span>%
</span><span id="__span-50-9"><a id="__codelineno-50-9" name="__codelineno-50-9" href="#__codelineno-50-9"></a><span class="hll">fast_zero/app.py<span class="w">            </span><span class="m">5</span><span class="w">      </span><span class="m">1</span><span class="w">    </span><span class="m">80</span>%
</span></span><span id="__span-50-10"><a id="__codelineno-50-10" name="__codelineno-50-10" href="#__codelineno-50-10"></a>-------------------------------------------
</span><span id="__span-50-11"><a id="__codelineno-50-11" name="__codelineno-50-11" href="#__codelineno-50-11"></a>TOTAL<span class="w">                       </span><span class="m">5</span><span class="w">      </span><span class="m">1</span><span class="w">    </span><span class="m">80</span>%
</span></code></pre></div>
<p>Por não coletar nenhum teste, o pytest ainda retornou um "erro". Para ver a cobertura, precisaremos executar novamente o <code>post_test</code> manualmente:</p>
<div class="language-shell highlight"><span class="filename">$ Execução no terminal!</span><pre><span></span><code><span id="__span-51-1"><a id="__codelineno-51-1" name="__codelineno-51-1" href="#__codelineno-51-1"></a>task<span class="w"> </span>post_test
</span><span id="__span-51-2"><a id="__codelineno-51-2" name="__codelineno-51-2" href="#__codelineno-51-2"></a>Wrote<span class="w"> </span>HTML<span class="w"> </span>report<span class="w"> </span>to<span class="w"> </span>htmlcov/index.html
</span></code></pre></div>
<p>No navegador, podemos ver que a única linha não "testada" é aquela onde temos a lógica (o corpo) da função <code>read_root</code>. As linhas de definição estão todas verdes:</p>
<p><a class="glightbox" href="../assets/01/navegador_com_pagina_de_cobertura_com_estrutuda_de_testes.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="browser" class="center" src="../assets/01/navegador_com_pagina_de_cobertura_com_estrutuda_de_testes.png"></a></p>
<p>No verde, vemos o que foi executado quando chamamos o teste, no vermelho o que não foi.</p>
<p>Para resolver isso, temos que criar um teste de fato, fazendo uma chamada para nossa API usando o cliente de teste que definimos:</p>
<div class="language-python highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">tests/test_app.py</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-52-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-52-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-52-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-52-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-52-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-52-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-52-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-52-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-52-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-52-10">10</a></span>
<span class="normal"><a href="#__codelineno-52-11">11</a></span>
<span class="normal"><a href="#__codelineno-52-12">12</a></span>
<span class="normal"><a href="#__codelineno-52-13">13</a></span>
<span class="normal"><a href="#__codelineno-52-14">14</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-52-1"><a id="__codelineno-52-1" name="__codelineno-52-1"></a><span class="kn">from</span><span class="w"> </span><span class="nn">http</span><span class="w"> </span><span class="kn">import</span> <span class="n">HTTPStatus</span>  <span class="c1"># (6)!</span>
</span><span id="__span-52-2"><a id="__codelineno-52-2" name="__codelineno-52-2"></a>
</span><span id="__span-52-3"><a id="__codelineno-52-3" name="__codelineno-52-3"></a><span class="kn">from</span><span class="w"> </span><span class="nn">fastapi.testclient</span><span class="w"> </span><span class="kn">import</span> <span class="n">TestClient</span>
</span><span id="__span-52-4"><a id="__codelineno-52-4" name="__codelineno-52-4"></a>
</span><span id="__span-52-5"><a id="__codelineno-52-5" name="__codelineno-52-5"></a><span class="kn">from</span><span class="w"> </span><span class="nn">fast_zero.app</span><span class="w"> </span><span class="kn">import</span> <span class="n">app</span>
</span><span id="__span-52-6"><a id="__codelineno-52-6" name="__codelineno-52-6"></a>
</span><span id="__span-52-7"><a id="__codelineno-52-7" name="__codelineno-52-7"></a>
</span><span id="__span-52-8"><a id="__codelineno-52-8" name="__codelineno-52-8"></a><span class="k">def</span><span class="w"> </span><span class="nf">test_root_deve_retornar_ok_e_ola_mundo</span><span class="p">():</span>  <span class="c1"># (1)!</span>
</span><span id="__span-52-9"><a id="__codelineno-52-9" name="__codelineno-52-9"></a>    <span class="n">client</span> <span class="o">=</span> <span class="n">TestClient</span><span class="p">(</span><span class="n">app</span><span class="p">)</span>  <span class="c1"># (2)!</span>
</span><span id="__span-52-10"><a id="__codelineno-52-10" name="__codelineno-52-10"></a>
</span><span id="__span-52-11"><a id="__codelineno-52-11" name="__codelineno-52-11"></a>    <span class="n">response</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">'/'</span><span class="p">)</span>  <span class="c1"># (3)!</span>
</span><span id="__span-52-12"><a id="__codelineno-52-12" name="__codelineno-52-12"></a>
</span><span id="__span-52-13"><a id="__codelineno-52-13" name="__codelineno-52-13"></a>    <span class="k">assert</span> <span class="n">response</span><span class="o">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="n">HTTPStatus</span><span class="o">.</span><span class="n">OK</span>  <span class="c1"># (4)!</span>
</span><span id="__span-52-14"><a id="__codelineno-52-14" name="__codelineno-52-14"></a>    <span class="k">assert</span> <span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">()</span> <span class="o">==</span> <span class="p">{</span><span class="s1">'message'</span><span class="p">:</span> <span class="s1">'Olá Mundo!'</span><span class="p">}</span>  <span class="c1"># (5)!</span>
</span></code></pre></div></td></tr></table></div>
<ol>
<li>No nome da função, escrevemos geralmente o que o teste de fato faz. Aqui estamos dizendo que root deve retornar o status OK e a mensagem "olá mundo". Root é o nome dado a raiz da URL. O caminho <code>/</code>, que colocamos na definição do <code class="language-python highlight"><span class="nd">@app</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">'/'</span><span class="p">)</span></code>. OK é o status que diz que a requisição aconteceu com sucesso no protocolo HTTP.</li>
<li>Aqui criamos o cliente de teste do nosso app</li>
<li>Nesse ponto, o <code>client</code> faz uma requisição. Da mesma forma que o browser, um cliente da API. Nisso, chamamos o endereço de root, usando o método GET.</li>
<li>Aqui fazemos a validação do código de resposta, para saber se a resposta é referente ao código <code>200</code>, que significa <code>OK</code>. Mais informações sobre esse tópico <a href="../02/#boas-praticas-para-constantes" target="_blank">aqui</a>.</li>
<li>No final, validamos se o dicionário que enviamos na função é o mesmo que recebemos quando fizemos a requisição.</li>
<li>Importação da biblioteca nativa do python que abstrai os códigos de resposta e nos apresenta o status. Mais informações sobre esse tópico <a href="../02/#boas-praticas-para-constantes" target="_blank">aqui</a>.</li>
</ol>
<p>Esse teste faz uma requisição GET no endpoint <code>/</code> e verifica se o código de status da resposta é 200 e se o conteúdo da resposta é <code>{'message': 'Olá Mundo!'}</code>.</p>
<div class="language-shell highlight"><span class="filename">$ Execução no terminal!</span><pre><span></span><code><span id="__span-53-1"><a id="__codelineno-53-1" name="__codelineno-53-1" href="#__codelineno-53-1"></a>task<span class="w"> </span><span class="nb">test</span>
</span><span id="__span-53-2"><a id="__codelineno-53-2" name="__codelineno-53-2" href="#__codelineno-53-2"></a><span class="c1"># parte da mensagem foi omitida</span>
</span><span id="__span-53-3"><a id="__codelineno-53-3" name="__codelineno-53-3" href="#__codelineno-53-3"></a><span class="hll">collected<span class="w"> </span><span class="m">1</span><span class="w"> </span>item
</span></span><span id="__span-53-4"><a id="__codelineno-53-4" name="__codelineno-53-4" href="#__codelineno-53-4"></a>
</span><span id="__span-53-5"><a id="__codelineno-53-5" name="__codelineno-53-5" href="#__codelineno-53-5"></a><span class="hll">tests/test_app.py::test_root_deve_retornar_ok_e_ola_mundo<span class="w"> </span>PASSED
</span></span><span id="__span-53-6"><a id="__codelineno-53-6" name="__codelineno-53-6" href="#__codelineno-53-6"></a>
</span><span id="__span-53-7"><a id="__codelineno-53-7" name="__codelineno-53-7" href="#__codelineno-53-7"></a>----------<span class="w"> </span>coverage:<span class="w"> </span>platform<span class="w"> </span>linux,<span class="w"> </span>python<span class="w"> </span><span class="m">3</span>.11.3-final-0<span class="w"> </span>-----------
</span><span id="__span-53-8"><a id="__codelineno-53-8" name="__codelineno-53-8" href="#__codelineno-53-8"></a>Name<span class="w">                    </span>Stmts<span class="w">   </span>Miss<span class="w">  </span>Cover
</span><span id="__span-53-9"><a id="__codelineno-53-9" name="__codelineno-53-9" href="#__codelineno-53-9"></a>-------------------------------------------
</span><span id="__span-53-10"><a id="__codelineno-53-10" name="__codelineno-53-10" href="#__codelineno-53-10"></a>fast_zero/__init__.py<span class="w">       </span><span class="m">0</span><span class="w">      </span><span class="m">0</span><span class="w">   </span><span class="m">100</span>%
</span><span id="__span-53-11"><a id="__codelineno-53-11" name="__codelineno-53-11" href="#__codelineno-53-11"></a><span class="hll">fast_zero/app.py<span class="w">            </span><span class="m">5</span><span class="w">      </span><span class="m">0</span><span class="w">   </span><span class="m">100</span>%
</span></span><span id="__span-53-12"><a id="__codelineno-53-12" name="__codelineno-53-12" href="#__codelineno-53-12"></a>-------------------------------------------
</span><span id="__span-53-13"><a id="__codelineno-53-13" name="__codelineno-53-13" href="#__codelineno-53-13"></a>TOTAL<span class="w">                       </span><span class="m">5</span><span class="w">      </span><span class="m">0</span><span class="w">   </span><span class="m">100</span>%
</span><span id="__span-53-14"><a id="__codelineno-53-14" name="__codelineno-53-14" href="#__codelineno-53-14"></a>
</span><span id="__span-53-15"><a id="__codelineno-53-15" name="__codelineno-53-15" href="#__codelineno-53-15"></a><span class="o">================</span><span class="w"> </span><span class="m">1</span><span class="w"> </span>passed<span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="m">1</span>.39s<span class="w"> </span><span class="o">================</span>
</span><span id="__span-53-16"><a id="__codelineno-53-16" name="__codelineno-53-16" href="#__codelineno-53-16"></a><span class="hll">Wrote<span class="w"> </span>HTML<span class="w"> </span>report<span class="w"> </span>to<span class="w"> </span>htmlcov/index.html
</span></span></code></pre></div>
<p>Dessa forma, temos um teste que coletou 1 item (1 teste). Esse teste foi aprovado e a cobertura não deixou de abranger nenhuma linha de código.</p>
<p>Como conseguimos coletar um item, o <code>post_test</code> foi executado e também gerou um HTML com a cobertura atualizada.</p>
<p><a class="glightbox" href="../assets/01/navegador_com_pagina_de_cobertura_com_teste.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="descrição" class="center" src="../assets/01/navegador_com_pagina_de_cobertura_com_teste.png"></a></p>
<h2 id="estrutura-de-um-teste">Estrutura de um teste</h2>
<p>Agora que escrevemos nosso primeiro teste de forma intuitiva, podemos entender o que cada passo do teste faz. Essa compreensão é vital, pois nos ajudará a escrever testes com mais confiança e eficácia. Para desvendar o método por trás da nossa abordagem, exploraremos uma estratégia conhecida como <a href="https://xp123.com/articles/3a-arrange-act-assert/" target="_blank">AAA</a>, que divide o teste em três fases distintas: Arrange, Act, Assert.</p>
<details class="info">
<summary>Caso fazer testes ainda seja complicado para você</summary>
<p>Temos uma live de python focada em ensinar os primeiros passos no mundo dos testes.
<a class="glightbox" href="https://www.youtube.com/embed/-8H2Pyxnoek" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><div class="video-container"><iframe src="https://www.youtube.com/embed/-8H2Pyxnoek" style="position:relative;width:100%;height:22.172vw" frameborder="0" allowfullscreen alt="type:video"></iframe></div></a></p>
<p><a class="md-button" href="https://youtu.be/-8H2Pyxnoek"><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 576 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M549.655 124.083c-6.281-23.65-24.787-42.276-48.284-48.597C458.781 64 288 64 288 64S117.22 64 74.629 75.486c-23.497 6.322-42.003 24.947-48.284 48.597-11.412 42.867-11.412 132.305-11.412 132.305s0 89.438 11.412 132.305c6.281 23.65 24.787 41.5 48.284 47.821C117.22 448 288 448 288 448s170.78 0 213.371-11.486c23.497-6.321 42.003-24.171 48.284-47.821 11.412-42.867 11.412-132.305 11.412-132.305s0-89.438-11.412-132.305m-317.51 213.508V175.185l142.739 81.205z"></path></svg></span> Link direto</a></p>
</details>
<p>Para analisar todas as etapas de um teste, usaremos como exemplo este primeiro teste que escrevemos:</p>
<div class="language-python highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">tests/test_app.py</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-54-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-54-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-54-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-54-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-54-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-54-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-54-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-54-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-54-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-54-10">10</a></span>
<span class="normal"><a href="#__codelineno-54-11">11</a></span>
<span class="normal"><a href="#__codelineno-54-12">12</a></span>
<span class="normal"><a href="#__codelineno-54-13">13</a></span>
<span class="normal"><a href="#__codelineno-54-14">14</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-54-1"><a id="__codelineno-54-1" name="__codelineno-54-1"></a><span class="kn">from</span><span class="w"> </span><span class="nn">http</span><span class="w"> </span><span class="kn">import</span> <span class="n">HTTPStatus</span>
</span><span id="__span-54-2"><a id="__codelineno-54-2" name="__codelineno-54-2"></a>
</span><span id="__span-54-3"><a id="__codelineno-54-3" name="__codelineno-54-3"></a><span class="kn">from</span><span class="w"> </span><span class="nn">fastapi.testclient</span><span class="w"> </span><span class="kn">import</span> <span class="n">TestClient</span>
</span><span id="__span-54-4"><a id="__codelineno-54-4" name="__codelineno-54-4"></a>
</span><span id="__span-54-5"><a id="__codelineno-54-5" name="__codelineno-54-5"></a><span class="kn">from</span><span class="w"> </span><span class="nn">fast_zero.app</span><span class="w"> </span><span class="kn">import</span> <span class="n">app</span>
</span><span id="__span-54-6"><a id="__codelineno-54-6" name="__codelineno-54-6"></a>
</span><span id="__span-54-7"><a id="__codelineno-54-7" name="__codelineno-54-7"></a>
</span><span id="__span-54-8"><a id="__codelineno-54-8" name="__codelineno-54-8"></a><span class="k">def</span><span class="w"> </span><span class="nf">test_root_deve_retornar_ok_e_ola_mundo</span><span class="p">():</span>
</span><span id="__span-54-9"><a id="__codelineno-54-9" name="__codelineno-54-9"></a>    <span class="n">client</span> <span class="o">=</span> <span class="n">TestClient</span><span class="p">(</span><span class="n">app</span><span class="p">)</span>  <span class="c1"># Arrange</span>
</span><span id="__span-54-10"><a id="__codelineno-54-10" name="__codelineno-54-10"></a>
</span><span id="__span-54-11"><a id="__codelineno-54-11" name="__codelineno-54-11"></a>    <span class="n">response</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">'/'</span><span class="p">)</span>  <span class="c1"># Act</span>
</span><span id="__span-54-12"><a id="__codelineno-54-12" name="__codelineno-54-12"></a>
</span><span id="__span-54-13"><a id="__codelineno-54-13" name="__codelineno-54-13"></a>    <span class="k">assert</span> <span class="n">response</span><span class="o">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="n">HTTPStatus</span><span class="o">.</span><span class="n">OK</span>  <span class="c1"># Assert</span>
</span><span id="__span-54-14"><a id="__codelineno-54-14" name="__codelineno-54-14"></a>    <span class="k">assert</span> <span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">()</span> <span class="o">==</span> <span class="p">{</span><span class="s1">'message'</span><span class="p">:</span> <span class="s1">'Olá Mundo!'</span><span class="p">}</span>  <span class="c1"># Assert</span>
</span></code></pre></div></td></tr></table></div>
<p>Com base nesse código, podemos observar as três fases:</p>
<h3 id="fase-1-organizar-arrange">Fase 1 - Organizar (Arrange)</h3>
<p>Nesta primeira etapa, estamos preparando o ambiente para o teste. No exemplo, a linha com o comentário <code>Arrange</code> não é o teste em si, ela monta o ambiente para o teste poder ser executado. Estamos configurando um <code>client</code> de testes para fazer a requisição ao <code>app</code>.</p>
<h3 id="fase-2-agir-act">Fase 2 - Agir (Act)</h3>
<p>Aqui é a etapa onde acontece a ação principal do teste, que consiste em chamar o Sistema Sob Teste (<a href="http://xunitpatterns.com/SUT.html" target="_blank">SUT</a>). No nosso caso, o SUT é a rota <code>/</code>, e a ação é representada pela linha <code>response = client.get('/')</code>. Estamos exercitando a rota e armazenando sua resposta na variável <code>response</code>. É a fase em que o código de testes executa o código de produção que está sendo testado. Agir aqui significa interagir diretamente com a parte do sistema que queremos avaliar, para ver como ela se comporta.</p>
<h3 id="fase-3-afirmar-assert">Fase 3 - <em>Afirmar</em> (Assert)</h3>
<p>Esta é a etapa de verificar se tudo correu como esperado. É fácil notar onde estamos fazendo a verificação, pois essa linha sempre tem a palavra reservada <code>assert</code>. A verificação é booleana, ou está correta, ou não está. Por isso, um teste deve sempre incluir um <code>assert</code> para verificar se o comportamento esperado está correto.</p>
<hr>
<p>Agora que compreendemos o que cada linha de teste faz em específico, podemos nos orientar de forma clara nos testes que escreveremos no futuro. Cada uma das linhas usadas tem uma razão de estar no teste, e conhecer essa estrutura não só nos dá uma compreensão mais profunda do que estamos fazendo, mas também nos dá confiança para explorar e escrever testes mais complexos.</p>
<h2 id="criando-nosso-repositorio-no-git">Criando nosso repositório no git</h2>
<p>Antes de concluirmos a aula, precisamos executar alguns passos:</p>
<ol>
<li>Criar um arquivo <code>.gitignore</code> para não adicionar o ambiente virtual e outros arquivos desnecessários no versionamento de código.</li>
<li>Criar um novo repositório no GitHub para versionar o código.</li>
<li>Subir o código que fizemos para o GitHub.</li>
</ol>
<p><strong>Criando o arquivo .gitignore</strong></p>
<p>Vamos iniciar com a criação de um arquivo <code>.gitignore</code> específico para Python. Existem diversos modelos disponíveis na internet, como os <a href="https://github.com/github/gitignore" target="_blank">disponíveis pelo próprio GitHub</a>, ou o <a href="https://gitignore.io" target="_blank">gitignore.io</a>. Uma ferramenta útil é a <a href="https://github.com/Antrikshy/ignr.py" target="_blank"><code>ignr</code></a>, feita em Python, que faz o download automático do arquivo para a nossa pasta de trabalho atual:</p>
<div class="language-shell highlight"><span class="filename">$ Execução no terminal!</span><pre><span></span><code><span id="__span-55-1"><a id="__codelineno-55-1" name="__codelineno-55-1" href="#__codelineno-55-1"></a>pipx<span class="w"> </span>run<span class="w"> </span>ignr<span class="w"> </span>-p<span class="w"> </span>python<span class="w"> </span>&gt;<span class="w"> </span>.gitignore<span class="w"> </span><span class="c1">#(1)!</span>
</span></code></pre></div>
<ol>
<li>O comando <code>pipx run</code> vai baixar o <code>ignr</code> vai executar o comando e vai desinstalar. Não existe a necessidade de termos ele instalado no sistema, pois só será executado dessa vez.</li>
</ol>
<p>O <code>.gitignore</code> é importante porque ele nos ajuda a evitar que arquivos desnecessários ou sensíveis sejam enviados para o repositório. Isso inclui o ambiente virtual, arquivos de configuração pessoal, entre outros.</p>
<p><strong>Criando um repositório no github</strong></p>
<p>Agora, com nossos arquivos indesejados ignorados, podemos iniciar o versionamento de código usando o <code>git</code>. Para criar um repositório local, usamos o comando <code>git init .</code>. Para criar esse repositório no GitHub, utilizaremos o <code>gh</code>, um utilitário de linha de comando que nos auxilia nesse processo:</p>
<div class="language-shell highlight"><span class="filename">$ Execução no terminal!</span><pre><span></span><code><span id="__span-56-1"><a id="__codelineno-56-1" name="__codelineno-56-1" href="#__codelineno-56-1"></a>git<span class="w"> </span>init<span class="w"> </span>.
</span><span id="__span-56-2"><a id="__codelineno-56-2" name="__codelineno-56-2" href="#__codelineno-56-2"></a>gh<span class="w"> </span>repo<span class="w"> </span>create
</span></code></pre></div>
<p>Ao executar <code>gh repo create</code>, algumas informações serão solicitadas, como o nome do repositório e se ele será público ou privado. Isso irá criar um repositório tanto localmente quanto no GitHub.</p>
<p><strong>Subindo nosso código para o github</strong></p>
<p>Com o repositório pronto, vamos versionar nosso código. Primeiro, adicionamos o código ao próximo commit com <code>git add .</code>. Em seguida, criamos um ponto na história do projeto com <code>git commit -m "Configuração inicial do projeto"</code>. Por fim, sincronizamos o repositório local com o remoto no GitHub usando <code>git push</code>:</p>
<div class="language-shell highlight"><span class="filename">$ Execução no terminal!</span><pre><span></span><code><span id="__span-57-1"><a id="__codelineno-57-1" name="__codelineno-57-1" href="#__codelineno-57-1"></a>git<span class="w"> </span>add<span class="w"> </span>.
</span><span id="__span-57-2"><a id="__codelineno-57-2" name="__codelineno-57-2" href="#__codelineno-57-2"></a>git<span class="w"> </span>commit<span class="w"> </span>-m<span class="w"> </span><span class="s2">"Configuração inicial do projeto"</span>
</span><span id="__span-57-3"><a id="__codelineno-57-3" name="__codelineno-57-3" href="#__codelineno-57-3"></a>git<span class="w"> </span>push
</span></code></pre></div>
<blockquote>
<p>Caso seja a primeira vez que está utilizando o <code>git push</code>, talvez seja necessário configurar suas credenciais do GitHub.</p>
</blockquote>
<p>Esses passos garantem que todo o código criado na aula esteja versionado e disponível para compartilhamento no GitHub.</p>
<h2 id="suplementar-para-proxima-aula">Suplementar / Para próxima aula</h2>
<p>Caso o mundo dos testes ainda seja um pouco nebuloso para você, recomendo que, antes de partir para a próxima aula, você dê uma assistida em algumas lives de python de fora desse curso:</p>
<ul>
<li><a href="https://youtu.be/-8H2Pyxnoek" target="_blank">Uma introdução aos testes: Como fazer? | Live de Python #232</a></li>
<li><a href="https://youtu.be/MjQCvJmc31A" target="_blank">Pytest: Uma introdução - Live de Python #167</a></li>
<li><a href="https://youtu.be/sidi9Z_IkLU" target="_blank">Pytest Fixtures - Live de Python #168</a></li>
</ul>
<h2 id="exercicio">Exercício</h2>
<ol>
<li>Crie um repositório para acompanhar o curso e suba em alguma plataforma, como <a href="https://github.com/" target="_blank">Github</a>, <a href="https://gitlab.com/" target="_blank">gitlab</a>, <a href="https://codeberg.org/" target="_blank">codeberg</a>, etc. E compartilhe o link no <a href="https://github.com/dunossauro/fastapi-do-zero/issues/91" target="_blank">repositório do curso</a> para podermos aprender juntos.</li>
</ol>
<p><a class="md-button" href="../exercicios_resolvidos/aula_01/">Exercícios resolvidos <span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24"><path d="M3 7V5h2V4a2 2 0 0 1 2-2h6v7l2.5-1.5L18 9V2h1c1.05 0 2 .95 2 2v16c0 1.05-.95 2-2 2H7c-1.05 0-2-.95-2-2v-1H3v-2h2v-4H3v-2h2V7zm4 4H5v2h2zm0-4V5H5v2zm0 12v-2H5v2z"></path></svg></span></a></p>
<h2 id="conclusao">Conclusão</h2>
<p>Pronto! Agora temos um ambiente de desenvolvimento totalmente configurado para começar a trabalhar com FastAPI e já fizemos nossa primeira imersão no Desenvolvimento Orientado por Testes. Na próxima aula, nos aprofundaremos na estruturação da nossa aplicação FastAPI. Até lá!</p>
<hr>
<p>Agora que a aula acabou, é um bom momento para você relembrar alguns conceitos e fixar melhor o conteúdo respondendo ao questionário referente a ela.</p>
<p><a class="md-button" href="../quizes/aula_01/">Quiz <span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24"><path d="M4 2h16a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2h-6.1l-3.7 3.71c-.2.19-.45.29-.7.29H9a1 1 0 0 1-1-1v-3H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2m8.19 3.5c-.89 0-1.6.18-2.14.54-.55.36-.83.96-.78 1.65h1.97c0-.28.1-.49.26-.63.2-.14.42-.21.69-.21.31 0 .58.08.76.26.18.17.27.39.27.69 0 .28-.08.53-.22.74-.17.22-.38.4-.64.54-.52.32-.86.6-1.07.84-.19.24-.29.58-.29 1.08h2c0-.28.05-.5.14-.68.09-.17.26-.32.52-.47.46-.21.84-.49 1.13-.85.29-.37.44-.76.44-1.2q0-1.05-.81-1.68c-.54-.41-1.29-.62-2.23-.62M11 12v2h2v-2z"></path></svg></span></a></p>
<div class="footnote">
<hr>
<ol>
<li id="fn:1">
<p>Você não precisa se preocupar com o docker inicialmente, ele será usado da aula 11 em diante. <a class="footnote-backref" href="#fnref:1" title="Jump back to footnote 1 in the text">↩</a></p>
</li>
<li id="fn:2">
<p>Exploraremos mais a fundo a relação de métodos e o protocolo HTTP na próxima aula. <a class="footnote-backref" href="#fnref:2" title="Jump back to footnote 2 in the text">↩</a></p>
</li>
<li id="fn:3">
<p>Em alguns casos, existe uma divergência de opiniões entre os linters mais tradicionais. Mas, em geral, funciona bem. <a class="footnote-backref" href="#fnref:3" title="Jump back to footnote 3 in the text">↩</a></p>
</li>
<li id="fn:4">
<p>Em versões antigas do texto, usávamos as ferramentas do PyCQA como o pylint e o isort. <a class="footnote-backref" href="#fnref:4" title="Jump back to footnote 4 in the text">↩</a></p>
</li>
</ol>
</div></div><style type="text/css">.quiz {
  border: 1px solid black;
  padding: 1rem;
  margin: 1rem 0;
}
/* Set margin-top of first quiz child */
.quiz > *:first-child {
  margin-top: 0;
}
.hidden {
  display: none;
}

form button {
  background-color: var(--md-primary-fg-color);
  border: none;
  color: var(--md-primary-bg-color);
  padding: 0.5rem 1rem;
  text-align: center;
  text-decoration: none;
  display: inline-block;
  font-size: 0.8rem;
}

.wrong label {
  color: red;
}
.correct label {
  color: green;
}

fieldset {
  border: none;
  display: flex;
  flex-direction: column;
}
fieldset input {
  margin: 0 10px;
}
fieldset label {
  margin: 0 10px;
}

label.correct {
  color: green;
}
label.wrong {
  color: red;
}
input[type='radio'].correct {
  accent-color: green;
}
input[type='radio'].wrong {
  accent-color: red;
}
.content {
  margin: 10px;
}
</style><script type="text/javascript" defer>document.querySelectorAll('.quiz').forEach((quiz) => {
  let form = quiz.querySelector('form');
  let fieldset = form.querySelector('fieldset');
  form.addEventListener('submit', (event) => {
    event.preventDefault();
    let selectedAnswers = form.querySelectorAll('input[name="answer"]:checked');
    let correctAnswers = fieldset.querySelectorAll(
      'input[name="answer"][correct]'
    );
    // Check if all correct answers are selected
    let is_correct = selectedAnswers.length === correctAnswers.length;
    for (let i = 0; i < selectedAnswers.length; i++) {
      if (!selectedAnswers[i].hasAttribute('correct')) {
        is_correct = false;
        break;
      }
    }
    let section = quiz.querySelector('section');
    if (is_correct) {
      section.classList.remove('hidden');
      resetFieldset(fieldset);
      // Mark all fields with colors
      const allAnswers = fieldset.querySelectorAll('input[name="answer"]');
      for (let i = 0; i < allAnswers.length; i++) {
        if (allAnswers[i].hasAttribute('correct')) {
          allAnswers[i].parentElement.classList.add('correct');
        } else {
          allAnswers[i].parentElement.classList.add('wrong');
        }
      }
    } else {
      section.classList.add('hidden');
      resetFieldset(fieldset);
      // Mark wrong fields with colors
      for (let i = 0; i < selectedAnswers.length; i++) {
        if (!selectedAnswers[i].hasAttribute('correct')) {
          selectedAnswers[i].parentElement.classList.add('wrong');
        } else {
          selectedAnswers[i].parentElement.classList.add('correct');
        }
      }
    }
  });
});

function resetFieldset(fieldset) {
  const fieldsetChildren = fieldset.children;
  for (let i = 0; i < fieldsetChildren.length; i++) {
    fieldsetChildren[i].classList.remove('wrong');
    fieldsetChildren[i].classList.remove('correct');
  }
}
</script>







  
    
  
  


  <aside class="md-source-file">
    
      
  <span class="md-source-file__fact">
    <span class="md-icon" title="Última atualização">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M21 13.1c-.1 0-.3.1-.4.2l-1 1 2.1 2.1 1-1c.2-.2.2-.6 0-.8l-1.3-1.3c-.1-.1-.2-.2-.4-.2m-1.9 1.8-6.1 6V23h2.1l6.1-6.1zM12.5 7v5.2l4 2.4-1 1L11 13V7zM11 21.9c-5.1-.5-9-4.8-9-9.9C2 6.5 6.5 2 12 2c5.3 0 9.6 4.1 10 9.3-.3-.1-.6-.2-1-.2s-.7.1-1 .2C19.6 7.2 16.2 4 12 4c-4.4 0-8 3.6-8 8 0 4.1 3.1 7.5 7.1 7.9l-.1.2z"/></svg>
    </span>
    <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-date" title="8 de junho de 2025 13:50:44 UTC">8 de junho de 2025</span>
  </span>

    
    
    
      
  
  <span class="md-source-file__fact">
    <span class="md-icon" title="Colaboradores">
      
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 5.5A3.5 3.5 0 0 1 15.5 9a3.5 3.5 0 0 1-3.5 3.5A3.5 3.5 0 0 1 8.5 9 3.5 3.5 0 0 1 12 5.5M5 8c.56 0 1.08.15 1.53.42-.15 1.43.27 2.85 1.13 3.96C7.16 13.34 6.16 14 5 14a3 3 0 0 1-3-3 3 3 0 0 1 3-3m14 0a3 3 0 0 1 3 3 3 3 0 0 1-3 3c-1.16 0-2.16-.66-2.66-1.62a5.54 5.54 0 0 0 1.13-3.96c.45-.27.97-.42 1.53-.42M5.5 18.25c0-2.07 2.91-3.75 6.5-3.75s6.5 1.68 6.5 3.75V20h-13zM0 20v-1.5c0-1.39 1.89-2.56 4.45-2.9-.59.68-.95 1.62-.95 2.65V20zm24 0h-3.5v-1.75c0-1.03-.36-1.97-.95-2.65 2.56.34 4.45 1.51 4.45 2.9z"/></svg>
      
    </span>
    <nav>
      dunossauro, Renan de Assis, Julio Formiga, Renne Rocha
    </nav>
  </span>

    
    
  </aside>





                
              </article>
            </div>
          
          
  <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var labels=set.querySelector(".tabbed-labels");for(var tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>

<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <!-- Footer -->
<footer class="md-footer">

  <!-- Link to previous and/or next page -->
  

  <!-- Further information -->
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>

      <img alt="" src="/estavel/assets/Written-By-Human-Not-By-AI-Badge-white.svg"/>

      <!-- Social links -->
      
        <div class="md-social">
  
    
    
    
    
      
      
    
    <a href="https://youtube.com/dunossauro" target="_blank" rel="noopener" title="youtube.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M549.655 124.083c-6.281-23.65-24.787-42.276-48.284-48.597C458.781 64 288 64 288 64S117.22 64 74.629 75.486c-23.497 6.322-42.003 24.947-48.284 48.597-11.412 42.867-11.412 132.305-11.412 132.305s0 89.438 11.412 132.305c6.281 23.65 24.787 41.5 48.284 47.821C117.22 448 288 448 288 448s170.78 0 213.371-11.486c23.497-6.321 42.003-24.171 48.284-47.821 11.412-42.867 11.412-132.305 11.412-132.305s0-89.438-11.412-132.305m-317.51 213.508V175.185l142.739 81.205z"/></svg>
    </a>
  
    
    
      
    
    
    
      
      
    
    <a href="https://bolha.us/@dunossauro" target="_blank" rel="noopener me" title="bolha.us" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M433 179.11c0-97.2-63.71-125.7-63.71-125.7-62.52-28.7-228.56-28.4-290.48 0 0 0-63.72 28.5-63.72 125.7 0 115.7-6.6 259.4 105.63 289.1 40.51 10.7 75.32 13 103.33 11.4 50.81-2.8 79.32-18.1 79.32-18.1l-1.7-36.9s-36.31 11.4-77.12 10.1c-40.41-1.4-83-4.4-89.63-54a102.5 102.5 0 0 1-.9-13.9c85.63 20.9 158.65 9.1 178.75 6.7 56.12-6.7 105-41.3 111.23-72.9 9.8-49.8 9-121.5 9-121.5m-75.12 125.2h-46.63v-114.2c0-49.7-64-51.6-64 6.9v62.5h-46.33V197c0-58.5-64-56.6-64-6.9v114.2H90.19c0-122.1-5.2-147.9 18.41-175 25.9-28.9 79.82-30.8 103.83 6.1l11.6 19.5 11.6-19.5c24.11-37.1 78.12-34.8 103.83-6.1 23.71 27.3 18.4 53 18.4 175z"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://github.com/dunossauro" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://www.twitch.tv/dunossauro" target="_blank" rel="noopener" title="www.twitch.tv" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M391.17 103.47h-38.63v109.7h38.63ZM285 103h-38.63v109.75H285ZM120.83 0 24.31 91.42v329.16h115.83V512l96.53-91.42h77.25L487.69 256V0Zm328.24 237.75-77.22 73.12h-77.24l-67.6 64v-64h-86.87V36.58h308.93Z"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://bolha.photos/dunossauro" target="_blank" rel="noopener" title="bolha.photos" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 24C5.373 24 0 18.627 0 12S5.373 0 12 0s12 5.373 12 12-5.373 12-12 12m-.953-9.38h2.202c2.074 0 3.755-1.637 3.755-3.656S15.323 7.31 13.249 7.31h-3.177c-1.197 0-2.167.944-2.167 2.109v8.208z"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://dunossauro.com" target="_blank" rel="noopener" title="dunossauro.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M1.992.034C1.217.166.602.841.416 1.769.388 1.901.36 21.858.388 23.895c0 .181 0 .181.923-.593.497-.416 1.328-1.128 1.801-1.516.34-.28.626-.543.637-.576.011-.039.022-1.148.017-2.466L3.76 16.35h1.516c.829 0 1.52.022 1.537.044s.028.538.022 1.142c0 .61.011 1.104.022 1.104.017 0 .643-.522.725-.604.017-.017.401-.335.851-.714.923-.77.917-.764 1.373-1.148.28-.236.34-.264.412-.203.072.066 2.878 2.421 3.592 3.02a1239 1239 0 0 1 3.932 3.306c.003.003 2.02 1.74 2.076 1.702.021-.01.038-3.333.038-7.38-.006-6.574.005-7.365.082-7.381.044-.011.895-.017 1.884-.017h1.801l-.022-3.761c-.005-2.07-.033-3.817-.05-3.877-.142-.495-.51-1.022-.883-1.28-.473-.318.164-.302-10.566-.302-5.442-.005-9.99.011-10.11.033"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://codeberg.org/dunossauro" target="_blank" rel="noopener" title="codeberg.org" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M11.955.49A12 12 0 0 0 0 12.49a12 12 0 0 0 1.832 6.373L11.838 5.928a.187.14 0 0 1 .324 0l10.006 12.935A12 12 0 0 0 24 12.49a12 12 0 0 0-12-12zm.375 6.467 4.416 16.553a12 12 0 0 0 5.137-4.213z"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "..", "features": ["content.code.annotate", "content.code.copy", "content.tabs.link", "search.suggest", "search.highlight", "search.share"], "search": "../assets/javascripts/workers/search.d50fe291.min.js", "tags": null, "translations": {"clipboard.copied": "Copiado para \u00e1rea de transfer\u00eancia", "clipboard.copy": "Copiar para \u00e1rea de transfer\u00eancia", "search.result.more.one": "Mais 1 nesta p\u00e1gina", "search.result.more.other": "Mais # nesta p\u00e1gina", "search.result.none": "Nenhum resultado encontrado", "search.result.one": "1 resultado encontrado", "search.result.other": "# resultados encontrados", "search.result.placeholder": "Digite para iniciar a busca", "search.result.term.missing": "Ausente", "select.version": "Selecione a vers\u00e3o"}, "version": {"default": "estavel", "provider": "mike"}}</script>
    
    
      <script src="../assets/javascripts/bundle.13a4f30d.min.js"></script>
      
        <script src="../assets/_markdown_exec_pyodide.js"></script>
      
        <script src="../assets/javascripts/extra.js"></script>
      
        <script src="https://unpkg.com/mermaid@10.9.1/dist/mermaid.min.js"></script>
      
    
  <script id="init-glightbox">const lightbox = GLightbox({"touchNavigation": true, "loop": false, "zoomable": true, "draggable": true, "openEffect": "zoom", "closeEffect": "zoom", "slideEffect": "slide"});
document$.subscribe(() => { lightbox.reload() });
</script></body>
</html>